System.register("chunks:///_virtual/fightCanvas.ts",["cc","./loading.ts"],(function(i){"use strict";var e,r,t,n;return{setters:[function(i){e=i.cclegacy,r=i._decorator,t=i.Component},function(i){n=i.loading}],execute:function(){var o,a,s,c,l;function u(i,e,r,t){r&&Object.defineProperty(i,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(t):void 0})}function f(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function d(i,e,r){return e in i?Object.defineProperty(i,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[e]=r,i}e._RF.push({},"02d5cQnz01OUrQ32z4G1Vn6","fightCanvas",void 0);var g=r.ccclass,h=r.property;i("fightCanvas",(o=g("fightCanvas"),a=h(n),o((l=function(i,e,r,t,n){var o={};return Object.keys(t).forEach((function(i){o[i]=t[i]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,t){return t(i,e,r)||r}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(i,e,o),o=null),o}((c=function(i){var e,r;function t(){for(var e,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return u(f(e=i.call.apply(i,[this].concat(t))||this),"loadingUI",l,f(e)),d(f(e),"curProgress",50),d(f(e),"isFirstLoad",!0),d(f(e),"isTouching",!1),e}r=i,(e=t).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var n=t.prototype;return n.start=function(){this.loadingUI.show(this.curProgress),this.loadingUI.node.active=!1},n.updateLoadingProgress=function(i){this.isFirstLoad?this.curProgress+=Math.floor(i/2):this.curProgress+=i,this.loadingUI.updateProgress(this.curProgress)},n.loadNewLevel=function(){this.loadingUI.node.active=!0,this.curProgress=0,this.isFirstLoad=!1},n.finishLoading=function(){this.loadingUI.node.active=!1},t}(t)).prototype,"loadingUI",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=c))||s));e._RF.pop()}}}));

System.register("chunks:///_virtual/AudioManager.ts",["cc","./Data.ts"],(function(t){"use strict";var i,u,s;return{setters:[function(t){i=t.cclegacy},function(t){u=t.default,s=t.KEY}],execute:function(){function n(t,i,u){return i in t?Object.defineProperty(t,i,{value:u,enumerable:!0,configurable:!0,writable:!0}):t[i]=u,t}t("STATE",void 0),i._RF.push({},"048camHdvZJ3IKYu2GNJPha","AudioManager",void 0);var o,e=[];!function(t){t[t.PLAYING=0]="PLAYING",t[t.PAUSE=1]="PAUSE",t[t.STOP=2]="STOP"}(o||(o=t("STATE",{})));var c=t("default",function(){function t(){n(this,"musicClip",void 0),n(this,"musicState",o.STOP),n(this,"allowMusic",!0),n(this,"allowSound",!0)}t.getInstance=function(){return t._instance||(t._instance=new t),t._instance};var i=t.prototype;return i.registAudioData=function(t){var i={state:o.STOP,clip:t};return e.push(i),i},i.getAudioData=function(t){return e.find((function(i){return i.clip===t}))||this.registAudioData(t)},i.setConfig=function(t){t.allowMusic&&(this.allowMusic=t.allowMusic,this.setMusicVolume()),void 0!==t.allowSound&&(this.allowSound=t.allowSound,this.setSoundsVolume())},i.getMusicVolume=function(){var t=this;return u.getData(s.LOCAL,(function(i,u){t.allowMusic=u.isMusic})),this.allowMusic?1:0},i.getSoundVolume=function(){var t=this;return u.getData(s.LOCAL,(function(i,u){t.allowSound=u.isSound})),this.allowSound?1:0},i.setMusicVolume=function(t){void 0===t&&(t=this.getMusicVolume()),this.musicClip&&this.musicClip.setVolume(t)},i.setSoundsVolume=function(t){void 0===t&&(t=this.getSoundVolume()),e.forEach((function(i){i.clip.setVolume(t)}))},i.playMusic=function(t){var i;if(t&&this.musicClip!==t)null===(i=this.musicClip)||void 0===i||i.stop(),this.musicClip=t,this.musicClip.setLoop(!0);else if(!this.musicClip)return;this.musicClip.play(),this.musicClip.setVolume(this.getMusicVolume()),this.musicState=o.PLAYING},i.stopMusic=function(){this.musicClip&&(this.musicClip.stop(),this.musicState=o.STOP)},i.pauseMusic=function(){this.musicClip&&(this.musicClip.pause(),this.musicState=o.PAUSE)},i.playSound=function(t,i){void 0===i&&(i=!1),this.getAudioData(t).state=o.PLAYING,t.setLoop(i),t.setVolume(this.getSoundVolume()),t.play()},i.stopSound=function(t){this.getAudioData(t).state=o.STOP,t.stop()},i.playOneShot=function(t){t.playOneShot(this.getSoundVolume())},i.pauseSound=function(t){this.getAudioData(t).state=o.PAUSE,t.pause()},i.pauseAllSound=function(){e.forEach((function(t){t.state===o.PLAYING&&(t.state=o.PAUSE,t.clip.pause())}))},i.resumeAllSound=function(){e.forEach((function(t){t.state===o.PAUSE&&(t.state=o.PLAYING,t.clip.play())}))},t}());n(c,"_instance",void 0),i._RF.pop()}}}));

System.register("chunks:///_virtual/loading.ts",["cc","./updateProgressValue.ts"],(function(e){"use strict";var r,t,i,o,n;return{setters:[function(e){r=e.cclegacy,t=e._decorator,i=e.Vec3,o=e.Component},function(e){n=e.updateProgressValue}],execute:function(){var s,a,l,u,c;function g(e,r,t,i){t&&Object.defineProperty(e,r,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(i):void 0})}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}r._RF.push({},"18094DT0lNOt6Usb/B0Mobf","loading",void 0);var f=t.ccclass,h=t.property;e("loading",(s=f("loading"),a=h(n),s((c=function(e,r,t,i,o){var n={};return Object.keys(i).forEach((function(e){n[e]=i[e]})),n.enumerable=!!n.enumerable,n.configurable=!!n.configurable,("value"in n||n.initializer)&&(n.writable=!0),n=t.slice().reverse().reduce((function(t,i){return i(e,r,t)||t}),n),o&&void 0!==n.initializer&&(n.value=n.initializer?n.initializer.call(o):void 0,n.initializer=void 0),void 0===n.initializer&&(Object.defineProperty(e,r,n),n=null),n}((u=function(e){var r,t;function o(){for(var r,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];return g(b(r=e.call.apply(e,[this].concat(o))||this),"lbProgress",c,b(r)),p(b(r),"targetProgress",0),p(b(r),"oriPos",new i),r}t=e,(r=o).prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t;var n=o.prototype;return n.start=function(){this.show(0)},n.show=function(e){this.targetProgress=e||0,this.lbProgress.playUpdateValue(this.targetProgress,this.targetProgress,0),this.lbProgress.isPlaying=!1,this.oriPos.set(this.lbProgress.node.position)},n.updateProgress=function(e){this.targetProgress=e;var r=Number(this.lbProgress.label.string);this.lbProgress.playUpdateValue(r,this.targetProgress,(this.targetProgress-r)/20),this.oriPos&&this.lbProgress.node.setPosition(new i(this.oriPos.x-10,this.oriPos.y,this.oriPos.z))},o}(o)).prototype,"lbProgress",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=u))||l));r._RF.pop()}}}));

System.register("chunks:///_virtual/LineEffect.ts",["cc"],(function(e){"use strict";var t,i,n,r,o,a,l;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.CCBoolean,r=e.Vec3,o=e.CCFloat,a=e.tween,l=e.Component}],execute:function(){var u,c,s,f,p,b,d,h,v,g,y,z,w;function m(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e,t,i,n,r){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t._RF.push({},"1ba45IFhFFNdINz6eSX9GIV","LineEffect",void 0);var _=i.ccclass,S=i.property;e("LineEffect",(u=_("LineEffect"),c=S(n),s=S(n),f=S(r),p=S(r),b=S(o),u((v=V((h=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return m(F(t=e.call.apply(e,[this].concat(n))||this),"changeScale",v,F(t)),m(F(t),"changePosition",g,F(t)),m(F(t),"startValue",y,F(t)),m(F(t),"endValue",z,F(t)),m(F(t),"duration",w,F(t)),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var r=n.prototype;return r.onLoad=function(){this.changeScale&&this.doScaleForever(this.startValue,this.endValue),this.changePosition&&this.doMove(this.startValue,this.endValue)},r.doScaleForever=function(e,t){a(this.node).repeatForever(a(this.node).to(this.duration[0],{scale:e},{easing:"cubicIn"}).to(this.duration[1],{scale:t},{easing:"cubicOut"}).start()).start()},r.doMove=function(e,t){a(this.node).repeatForever(a(this.node).to(this.duration[0],{position:e}).to(this.duration[1],{position:t},{easing:"quartOut"}).to(.25,{position:e}).to(.25,{position:t}).start()).start()},n}(l)).prototype,"changeScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=V(h.prototype,"changePosition",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=V(h.prototype,"startValue",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=V(h.prototype,"endValue",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=V(h.prototype,"duration",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[0,0]}}),d=h))||d));t._RF.pop()}}}));

System.register("chunks:///_virtual/LevelList.ts",["cc","./Data.ts","./gameManager.ts"],(function(e){"use strict";var t,n,i,a,r,o,l,c,u,s,v,f,g;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.Prefab,a=e.SpriteAtlas,r=e.Node,o=e.find,l=e.instantiate,c=e.tween,u=e.v3,s=e.Component},function(e){v=e.default},function(e){f=e.TOTAL_LEVEL,g=e.SOUND}],execute:function(){var m,p,b,h,d,y,C,_,L;function M(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t,n,i,a){var r={};return Object.keys(i).forEach((function(e){r[e]=i[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}t._RF.push({},"21e3eIoWrxOfIJU78x1gToe","LevelList",void 0);var I=n.ccclass,O=n.property;e("LevelList",(m=I("LevelList"),p=O(i),b=O([a]),h=O(r),m((C=z((y=function(e){var t,n;function i(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return M(k(t=e.call.apply(e,[this].concat(i))||this),"itemPrefeb",C,k(t)),M(k(t),"icon",_,k(t)),M(k(t),"content",L,k(t)),w(k(t),"items",[]),w(k(t),"_gameManager",void 0),w(k(t),"checkContainer",!1),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var a=i.prototype;return a.onLoad=function(){this._gameManager=o("gameManager").getComponent("GameManager");for(var e=1;e<=f;e++){var t={level:e,node:l(this.itemPrefeb)};this.content.addChild(t.node),this.items.push(t),t.node.getComponent("LevelItem").setData(e)}},a.onEnable=function(){this.setItemsStatus(),1==this._gameManager.gameContainer.active&&(this.checkContainer=!0),this._gameManager.gameContainer.active=!1,c(this.content.parent).by(.2,{position:u(54)}).by(.3,{position:u(-54)}).start()},a.setItemsStatus=function(){var e,t=this;v.getData(v.getKeyData(),(function(n,i){n?console.log(n):(e=i.unlockedLevel,v.saveData(v.getKeyData(),i),t.items.forEach((function(t){var n="Lock";t.level<e&&(n="Clear"),t.level===e&&(n="Unlock"),t.node.getComponent("LevelItem").setStatus(n)})))}))},a.onClose=function(e){var t=this;c(this.content.parent).by(.3,{position:u(54)}).by(.2,{position:u(-54)}).call((function(){t.node.active=!1,e&&e()})).start()},a.onBack=function(){var e=this;this._gameManager.playSound(g.CLICK,!1),this.onClose((function(){1==e.checkContainer&&(0==e._gameManager.homeUI.active?e._gameManager.gameContainer.active=!0:e._gameManager.gameContainer.active=!1,e.checkContainer=!1)}))},a.onItemClick=function(e){var t=this;this._gameManager.playSound(g.CLICK,!1);var n=this.items.find((function(t){return t.level===e})),i=this._gameManager.unlockedLevel;n.level>i||this.onClose((function(){n&&t._gameManager.initLevel(n.level),t._gameManager.levelUI.active=!0}))},i}(s)).prototype,"itemPrefeb",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=z(y.prototype,"icon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=z(y.prototype,"content",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));t._RF.pop()}}}));

System.register("chunks:///_virtual/ButtonEffect.ts",["cc"],(function(e){"use strict";var t,i,n,r,o,a,u;return{setters:[function(e){t=e.cclegacy,i=e._decorator,n=e.CCBoolean,r=e.Vec3,o=e.CCFloat,a=e.tween,u=e.Component}],execute:function(){var l,c,s,f,b,p,d,h,v,g,y,z,w;function m(e,t,i,n){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e,t,i,n,r){var o={};return Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,n){return n(e,t,i)||i}),o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t._RF.push({},"3505e93O7tLgZrgqVz5dw/+","ButtonEffect",void 0);var E=i.ccclass,O=i.property;e("ButtonEffect",(l=E("ButtonEffect"),c=O(n),s=O(n),f=O(r),b=O(r),p=O(o),l((v=_((h=function(e){var t,i;function n(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return m(V(t=e.call.apply(e,[this].concat(n))||this),"changeScale",v,V(t)),m(V(t),"changePosition",g,V(t)),m(V(t),"startValue",y,V(t)),m(V(t),"endValue",z,V(t)),m(V(t),"duration",w,V(t)),t}i=e,(t=n).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var r=n.prototype;return r.onEnable=function(){this.changeScale&&this.doScaleForever(this.startValue,this.endValue),this.changePosition&&this.doMove(this.startValue,this.endValue)},r.doScaleForever=function(e,t){a(this.node).repeatForever(a(this.node).to(this.duration[0],{scale:e},{easing:"cubicIn"}).to(this.duration[1],{scale:t},{easing:"cubicOut"}).start()).start()},r.doMove=function(e,t){a(this.node).to(this.duration[0],{position:e}).to(this.duration[1],{position:t},{easing:"quartOut"}).start()},n}(u)).prototype,"changeScale",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=_(h.prototype,"changePosition",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=_(h.prototype,"startValue",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=_(h.prototype,"endValue",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=_(h.prototype,"duration",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[0,0]}}),d=h))||d));t._RF.pop()}}}));

System.register("chunks:///_virtual/Data.ts",["cc","./TiniController.ts"],(function(t){"use strict";var e,a,n,r;return{setters:[function(t){e=t.cclegacy,a=t._decorator,n=t.sys},function(t){r=t.default}],execute:function(){var o,i,s;function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n])}return t}).apply(this,arguments)}t("KEY",void 0),e._RF.push({},"3f120HKEb9JZ5G3XyYEGj0t","Data",void 0);var c,l=a.ccclass,f=(a.property,"userData");!function(t){t[t.FACEBOOK=0]="FACEBOOK",t[t.LOCAL=1]="LOCAL",t[t.CONFIG=2]="CONFIG",t[t.TINI=3]="TINI"}(c||(c=t("KEY",{})));var g,d,p;t("default",l("Data")((s=i=function(){function t(){}return t.isLocal=function(){return!0},t.saveData=function(e,a,o){var i=u({},t.defaultData,{},a);if(e===c.TINI&&(console.log("get data from tini"),r.getInstance().sendMessageToTiniApp({api:"setStorage",params:{key:f,data:JSON.stringify(i)}},(function(){console.log("Save data user done"),o&&o()}))),e===c.LOCAL)return console.log("get data from local"),n.localStorage.setItem(f,JSON.stringify(i)),void(o&&o());c.FACEBOOK},t.getData=function(e,a){var o=function(e){return u({},t.defaultData,{},e)};if(e===c.TINI&&(console.log("get data from tini"),r.getInstance().sendMessageToTiniApp({api:"getStorage",params:{key:f}},(function(e){var n=e.res.data?JSON.parse(e.res.data):t.defaultData;a(null,o(n))}))),e===c.LOCAL){var i=n.localStorage.getItem(f);return i=i?JSON.parse(i):t.defaultData,void a(null,o(i))}e!==c.FACEBOOK&&e===c.CONFIG&&a("not define yet")},t.removeData=function(){localStorage.removeItem(f)},t.getKeyData=function(){return r.getInstance().isHasTiniApp()?c.TINI:c.LOCAL},t}(),p={unlockedLevel:0,currentLevel:0,isMusic:!0,isSound:!0,isVibration:!0,hintNumber:0,coinNumber:0,skipNumber:0},(d="defaultData")in(g=i)?Object.defineProperty(g,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):g[d]=p,o=s))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/Guide.ts",["cc"],(function(t){"use strict";var e,i,n,s,o,a,h,r,l,c,g,m,u;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Node,s=t.SpriteFrame,o=t.v3,a=t.BlockInputEvents,h=t.Sprite,r=t.Color,l=t.Label,c=t.Button,g=t.Tween,m=t.tween,u=t.Component}],execute:function(){var d,p,b,k,C,v,M,y,P,B,f,G,T;function H(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function E(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function N(t,e,i,n,s){var o={};return Object.keys(n).forEach((function(t){o[t]=n[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,n){return n(t,e,i)||i}),o),s&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(s):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}t("IMG",void 0),e._RF.push({},"491f73/w6RHiqi6cwY1H6Un","Guide",void 0);var x,F=i.ccclass,I=i.property;!function(t){t[t.SETTING=0]="SETTING",t[t.PAUSE=1]="PAUSE",t[t.LEVEL=2]="LEVEL",t[t.STORE=3]="STORE",t[t.BG=4]="BG"}(x||(x=t("IMG",{})));t("Guide",(d=F("Guide"),p=I(n),b=I(n),k=I(n),C=I(n),v=I(s),d((P=N((y=function(t){var e,i;function n(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return H(w(e=t.call.apply(t,[this].concat(n))||this),"Mask",P,w(e)),H(w(e),"Text",B,w(e)),H(w(e),"Hand",f,w(e)),H(w(e),"Image",G,w(e)),H(w(e),"imageFrame",T,w(e)),E(w(e),"bgMask",void 0),E(w(e),"count",0),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var s=n.prototype;return s.onLoad=function(){this.count=0},s.onEnable=function(){this.bgMask=this.Mask.getChildByName("BG"),this.Image.active=!1,this.Mask.active=!1,this.Text.active=!0,this.Hand.active=!0,this.count<5?this.Hand.setRotationFromEuler(o(0,0,0)):(this.count=5,this.showGuideLevel())},s.onDisable=function(){},s.showGuide=function(){this.count<5?this.showGuideHome():this.showGuideLevel()},s.showGuideHome=function(){switch(this.Mask.getChildByName("BG").getComponent(a).enabled=!1,this.Mask.getChildByName("BG1").getComponent(a).enabled=!1,this.count){case 0:this.Mask.active=!0,this.Image.active=!0,this.Mask.setPosition(o(-350,820,0)),this.bgMask.setPosition(o(350,-820,0)),this.Image.getComponent(h).spriteFrame=this.imageFrame[x.SETTING],this.Image.setScale(o(2,2,2)),this.Text.getComponent(l).string="Nhấn vào đây\nđể mở Cài đặt!",this.Text.setPosition(o(90,700,0)),this.Hand.setPosition(o(-290,730,0)),this.Hand.setRotationFromEuler(o(0,0,0));break;case 1:this.Mask.setPosition(o(-300,-680,0)),this.bgMask.setPosition(o(300,680,0)),this.Image.getComponent(h).spriteFrame=this.imageFrame[x.LEVEL],this.Image.setScale(o(1.2,1.2,1.2)),this.Text.getComponent(l).string="Bấm vào đây để chọn cấp độ!",this.Text.setPosition(o(16,-505,0)),this.Hand.setPosition(o(-250,-620,0)),this.Hand.setRotationFromEuler(o(0,0,95));break;case 2:this.Mask.setPosition(o(300,-680,0)),this.bgMask.setPosition(o(-300,680,0)),this.Image.getComponent(h).spriteFrame=this.imageFrame[x.STORE],this.Image.setScale(o(1.2,1.2,1.2)),this.Text.getComponent(l).string="Bấm vào đây để đi đến cửa hàng!",this.Text.setPosition(o(16,-505,0)),this.Hand.setPosition(o(350,-620,0)),this.Hand.setRotationFromEuler(o(0,0,95));break;case 3:this.Image.active=!1,this.Hand.active=!1,this.Mask.setPosition(o(175,820,0)),this.Mask.setScale(o(2,1,1)),this.bgMask.setPosition(o(-175,-820,0)),this.Text.getComponent(l).string="Gợi ý và tiền\nxu được hiển thị\nở đây,bạn có thể\nsử dụng nó!",this.Text.setPosition(o(-245,770,0));break;case 4:this.Hand.active=!0,this.Image.active=!1,this.Mask.getChildByName("BG").getComponent(h).color=new r(0,0,0,0),this.Mask.getChildByName("BG").getComponent(a).enabled=!0,this.Mask.getChildByName("BG1").active=!0,this.Mask.getChildByName("BG1").getComponent(h).color=new r(0,0,0,0),this.Mask.getChildByName("BG1").getComponent(a).enabled=!0,this.Mask.setPosition(o(0,0,0)),this.Mask.setScale(o(1,1,1)),this.bgMask.setPosition(o(0,1500,0)),this.Mask.getChildByName("BG1").setPosition(o(0,-1650,0)),this.Text.getComponent(l).string="Bây giờ, bấm vào đây\nđể bắt đầu trò chơi!",this.Text.setPosition(o(0,-505,0)),this.Hand.setPosition(o(105,-400,0)),this.Hand.setRotationFromEuler(o(0,0,0))}this.count++,5==this.count&&(this.node.getComponent(a).enabled=!1,this.node.getComponent(c).enabled=!1)},s.showGuideLevel=function(){switch(this.Mask.getChildByName("BG").getComponent(a).enabled=!1,this.Mask.getChildByName("BG1").getComponent(a).enabled=!1,this.Mask.getChildByName("BG").getComponent(h).color=new r(0,0,0,150),this.Mask.setScale(o(1,1,1)),this.count){case 5:this.node.getComponent(a).enabled=!0,this.Mask.active=!0,this.Image.active=!1,this.Mask.setPosition(o(-300,-680,0)),this.bgMask.setPosition(o(300,680,0)),this.Text.getComponent(l).string="Nhấp vào đây\nnếu bạn muốn bỏ qua cấp độ!",this.Text.setPosition(o(16,-505,0)),this.Hand.setPosition(o(-250,-630,0)),this.Hand.setRotationFromEuler(o(0,0,95));break;case 6:this.Mask.setPosition(o(0,-680,0)),this.bgMask.setPosition(o(0,680,0)),this.Text.getComponent(l).string="Bạn có thể đặt lại cấp độ này!",this.Text.setPosition(o(16,-505,0)),this.Hand.setPosition(o(30,-630,0)),this.Hand.setRotationFromEuler(o(0,0,95));break;case 7:this.Mask.setPosition(o(300,-680,0)),this.bgMask.setPosition(o(-300,680,0)),this.Text.getComponent(l).string="Nhấn vào đây để hiển thị gợi ý!",this.Text.setPosition(o(16,-505,0)),this.Hand.setPosition(o(350,-630,0)),this.Hand.setRotationFromEuler(o(0,0,95));break;case 8:this.Mask.setPosition(o(350,820,0)),this.bgMask.setPosition(o(-350,-820,0)),this.Image.getComponent(h).spriteFrame=this.imageFrame[x.PAUSE],this.Image.setScale(o(1.5,1.5,1.5)),this.Text.getComponent(l).string="Nếu bạn muốn quay lại trang chủ\ncũng như chọn cấp độ, hãy nhấp\nvào đây!",this.Text.setPosition(o(0,580,0)),this.Hand.setPosition(o(290,730,0)),this.Hand.setRotationFromEuler(o(0,0,-90));break;case 9:this.Image.active=!1,this.node.getComponent(a).enabled=!1,this.Mask.getChildByName("BG").getComponent(h).color=new r(0,0,0,0),this.Mask.getChildByName("BG").getComponent(a).enabled=!0,this.Mask.getChildByName("BG1").active=!0,this.Mask.getChildByName("BG1").getComponent(h).color=new r(0,0,0,0),this.Mask.getChildByName("BG1").getComponent(a).enabled=!0,this.Mask.setPosition(o(0,0,0)),this.Mask.setScale(o(1,1,1)),this.bgMask.setPosition(o(0,1500,0)),this.Mask.getChildByName("BG1").setPosition(o(0,-1650,0)),this.Text.getComponent(l).string="Chạm và di chuyển nó!",this.Text.setPosition(o(0,-550,0)),this.Hand.setPosition(o(-215,-100,0)),this.Hand.setRotationFromEuler(o(0,0,0)),g.stopAllByTarget(this.Hand),m(this.Hand).repeatForever(m(this.Hand).to(0,{position:o(-230,-180,0)}).to(1,{position:o(200,-180,0)}).start()).start(),this.node.getComponent(c).enabled=!1;break;default:this.count=9,this.node.getComponent(a).enabled=!1,this.node.getComponent(c).enabled=!1}this.count<9&&this.count++},n}(u)).prototype,"Mask",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=N(y.prototype,"Text",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=N(y.prototype,"Hand",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=N(y.prototype,"Image",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=N(y.prototype,"imageFrame",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=y))||M));e._RF.pop()}}}));

System.register("chunks:///_virtual/PauseManager.ts",["cc","./gameManager.ts"],(function(e){"use strict";var n,i,t,a,r,o;return{setters:[function(e){n=e.cclegacy,i=e._decorator,t=e.Node,a=e.find,r=e.Component},function(e){o=e.SOUND}],execute:function(){var u,c,l,s,p;function v(e,n,i,t){i&&Object.defineProperty(e,n,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(t):void 0})}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,n,i){return n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e}n._RF.push({},"4bfa602EcxPNqUu6bz7AZvO","PauseManager",void 0);var b=i.ccclass,d=i.property;e("Button",(u=b("Button"),c=d(t),u((p=function(e,n,i,t,a){var r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,t){return t(e,n,i)||i}),r),a&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(a):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,n,r),r=null),r}((s=function(e){var n,i;function t(){for(var n,i=arguments.length,t=new Array(i),a=0;a<i;a++)t[a]=arguments[a];return v(f(n=e.call.apply(e,[this].concat(t))||this),"pauseMenu",p,f(n)),g(f(n),"_gameContainer",void 0),g(f(n),"_gameManager",void 0),g(f(n),"_options",void 0),n}i=e,(n=t).prototype=Object.create(i.prototype),n.prototype.constructor=n,n.__proto__=i;var r=t.prototype;return r.onEnable=function(){var e;this._gameContainer=a("GameContainer"),this._gameManager=null===(e=a("gameManager"))||void 0===e?void 0:e.getComponent("GameManager"),this._options=a("Canvas/UI_Level/ContainerUI/Options")},r.Pause_pressed=function(){this._gameManager.playSound(o.CLICK,!1),this.pauseMenu.active=!0,this._gameContainer.active=!1,this._options.active=!1},r.onClose=function(){this._gameManager.playSound(o.CLICK,!1),this._gameContainer.active=!0,this._options.active=!0,this.pauseMenu.active=!1},r.onCloseTobackHome=function(){this._gameManager.playSound(o.CLICK,!1),this._gameContainer.active=!1,this._options.active=!1,this.pauseMenu.active=!1},t}(r)).prototype,"pauseMenu",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=s))||l));n._RF.pop()}}}));

System.register("chunks:///_virtual/Main.ts",["cc","./loading.ts"],(function(i){"use strict";var e,r,n,t,o;return{setters:[function(i){e=i.cclegacy,r=i._decorator,n=i.director,t=i.Component},function(i){o=i.loading}],execute:function(){var s,a,c,u,l;function d(i,e,r,n){r&&Object.defineProperty(i,e,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function g(i){if(void 0===i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function h(i,e,r){return e in i?Object.defineProperty(i,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[e]=r,i}e._RF.push({},"4c406GWtr1NXpimCsFtivJ1","Main",void 0);var f=r.ccclass,p=r.property;i("main",(s=f("main"),a=p(o),s((l=function(i,e,r,n,t){var o={};return Object.keys(n).forEach((function(i){o[i]=n[i]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=r.slice().reverse().reduce((function(r,n){return n(i,e,r)||r}),o),t&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(t):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(i,e,o),o=null),o}((u=function(i){var e,r;function t(){for(var e,r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return d(g(e=i.call.apply(i,[this].concat(n))||this),"loadingUI",l,g(e)),h(g(e),"retryTimes",0),h(g(e),"uid",""),h(g(e),"curProgress",0),h(g(e),"isLoginFinished",!1),h(g(e),"isSubPackageFinished",!1),h(g(e),"isConfigLoaded",!1),e}r=i,(e=t).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=t.prototype;return o.start=function(){var i=this;this.loadingUI.show(),this.curProgress=5,this.loadingUI.updateProgress(this.curProgress),this.loadMainScene(),this.curProgress+=5,this.loadingUI.updateProgress(this.curProgress),this.curProgress+=5,this.curProgress+=15,this.loadingUI.updateProgress(this.curProgress),this.isConfigLoaded=!0,this.loadMainScene(),this.startLogin(),this.downloadGameRes((function(){console.log("subpackage download finished!"),i.isSubPackageFinished=!0,i.loadMainScene()}))},o.startLogin=function(){this.userLogin()},o.userLogin=function(){console.log("login finished!"),this.isLoginFinished=!0,this.loadMainScene()},o.downloadGameRes=function(i){this.curProgress+=15,this.loadingUI.updateProgress(this.curProgress),i&&i()},o.loadGameSubPackage=function(i){this.loadingUI.updateProgress(this.curProgress)},o.loadMainScene=function(){var i=this;this.isConfigLoaded&&this.isLoginFinished&&this.isSubPackageFinished&&n.preloadScene("main",(function(e){i.curProgress+=50,i.loadingUI.updateProgress(i.curProgress),e||n.loadScene("main",(function(){}))}))},t}(t)).prototype,"loadingUI",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=u))||c));e._RF.pop()}}}));

System.register("chunks:///_virtual/bundleManager.ts",["cc"],(function(e){"use strict";var r,n,t,o,a;return{setters:[function(e){r=e.cclegacy,n=e._decorator,t=e.assetManager,o=e.Prefab,a=e.Component}],execute:function(){var i,u,c;function l(e,r){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,r){if(!e)return;if("string"==typeof e)return s(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,r)}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var t=0;return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}r._RF.push({},"635c0RZMelAi4M2sFsrML6A","bundleManager",void 0);var p=n.ccclass;n.property,e("BundleManager",p("BundleManager")((c=u=function(e){var r,n;function a(){for(var r,n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];return d(f(r=e.call.apply(e,[this].concat(t))||this),"_prefabs",[]),d(f(r),"_lazyLoadBundle",[]),r}return n=e,(r=a).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,a.getInstance=function(){return a._instance||(a._instance=new a),a._instance},a.prototype.getPrefabByName=function(e,r,n){var a=this;void 0===r&&(r=null),void 0===n&&(n=null);for(var i,u=l(this._prefabs);!(i=u()).done;){var c=i.value;if(c.data.name===e)return void(r&&r(null,c))}t.loadBundle(e,(function(t,i){t||i.load(e,o,(function(e,r,t){n&&n(e,r)}),(function(n,t){if(!n)return console.error("Loaded "+e),a._prefabs.includes(t)||a._prefabs.push(t),void(r&&r(null,t));console.log(n)}))}))},a}(a),d(u,"_instance",void 0),i=c))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/addCoin.ts",["cc"],(function(t){"use strict";var o,n,e,i,s;return{setters:[function(t){o=t.cclegacy,n=t._decorator,e=t.v3,i=t.tween,s=t.Component}],execute:function(){var r;o._RF.push({},"6540f5Q2wBP/LEHZUIjaHeh","addCoin",void 0);var c=n.ccclass;n.property,t("AddCoin",c("AddCoin")(r=function(t){var o,n;function s(){return t.apply(this,arguments)||this}n=t,(o=s).prototype=Object.create(n.prototype),o.prototype.constructor=o,o.__proto__=n;var r=s.prototype;return r.onLoad=function(){this.node.scale=e(1,1,1),this.node.setPosition(e(250,-560,0))},r.onEnable=function(){var t=this;i(this.node).by(.5,{position:e(0,100,0)},{easing:"smooth"}).call((function(){t.node.scale=e(0,0,0)})).start()},r.onDisable=function(){this.node.scale=e(1,1,1),this.node.setPosition(e(250,-560,0))},s}(s))||r);o._RF.pop()}}}));

System.register("chunks:///_virtual/gameManager.ts",["cc","./TiniController.ts","./bundleManager.ts","./Data.ts","./AudioManager.ts","./Analytics.ts"],(function(e){"use strict";var t,n,i,o,l,a,r,s,u,c,v,h,d,g,f,p,b,m,L,_,C;return{setters:[function(e){t=e.cclegacy,n=e._decorator,i=e.Node,o=e.Label,l=e.Camera,a=e.AudioClip,r=e.Prefab,s=e.v3,u=e.instantiate,c=e.find,v=e.tween,h=e.BlockInputEvents,d=e.Button,g=e.Component},function(e){f=e.default},function(e){p=e.BundleManager},function(e){b=e.default,m=e.KEY},function(e){L=e.default},function(e){_=e.GameAnalytics,C=e.EGAProgressionStatus}],execute:function(){var N,y,I,S,k,w,D,U,E,K,P,O,B,A,T,M,z,R,G,x,V,H,j,F,W,Z,Y,q,J,Q,X;function $(e,t,n,i){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(i):void 0})}function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e,t,n,i,o){var l={};return Object.keys(i).forEach((function(e){l[e]=i[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=n.slice().reverse().reduce((function(n,i){return i(e,t,n)||n}),l),o&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(o):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(e,t,l),l=null),l}e("SOUND",void 0),t._RF.push({},"6843brNF6xA76cZSTiZgKoC","gameManager",void 0);var oe,le=n.ccclass,ae=n.property,re="1.0.2",se=e("TOTAL_LEVEL",104);!function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.CLICK=1]="CLICK",e[e.ERROR=2]="ERROR",e[e.WIN=3]="WIN",e[e.START_MOVE=4]="START_MOVE",e[e.END_MOVE=5]="END_MOVE"}(oe||(oe=e("SOUND",{})));var ue="0d1492fdef032e66b70f2f7723bf12ed",ce="071048127f285d40515c84820f6cfd2b16af62c4";e("GameManager",(N=le("GameManager"),y=ae(i),I=ae(i),S=ae(i),k=ae(i),w=ae(o),D=ae(i),U=ae(l),E=ae(a),K=ae(r),P=ae(r),O=ae(r),B=ae(i),A=ae(i),T=ae(i),N((R=ie((z=function(e){var t,n;function i(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return $(te(t=e.call.apply(e,[this].concat(i))||this),"ui",R,te(t)),$(te(t),"gameContainer",G,te(t)),$(te(t),"levelUI",x,te(t)),$(te(t),"homeUI",V,te(t)),$(te(t),"levelName",H,te(t)),$(te(t),"comingSoon",j,te(t)),$(te(t),"mainCamera",F,te(t)),$(te(t),"sounds",W,te(t)),$(te(t),"levelPrefab",Z,te(t)),$(te(t),"shopPrefab",Y,te(t)),$(te(t),"setting",q,te(t)),$(te(t),"btnSetting",J,te(t)),$(te(t),"alert",Q,te(t)),$(te(t),"popupGuide",X,te(t)),ne(te(t),"levelNode",void 0),ne(te(t),"shopNode",void 0),ne(te(t),"_bundleInstance",void 0),ne(te(t),"_unlockedLevel",0),ne(te(t),"_currentLevel",0),ne(te(t),"pictureWin",void 0),ne(te(t),"_loading",void 0),ne(te(t),"isPreloading",void 0),ne(te(t),"userTiki",null),ne(te(t),"_level",0),ne(te(t),"_hintNumber",0),ne(te(t),"_coinNumber",0),ne(te(t),"_skipNumber",0),t}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var l,a,r,g=i.prototype;return g.onLoad=function(){var e=this;f.getInstance().init(),this._bundleInstance=p.getInstance(),console.log("check key 143",b.getKeyData()===m.TINI),b.getData(b.getKeyData(),(function(t,n){console.log("error 146",t),e._unlockedLevel=n.unlockedLevel,e._currentLevel=n.currentLevel,e._hintNumber=n.hintNumber,e._coinNumber=n.coinNumber,e._skipNumber=n.skipNumber,b.saveData(b.getKeyData(),n),e.showLabel()})),b.getData(b.getKeyData(),(function(t,n){L.getInstance().setConfig({allowMusic:n.isMusic||!0,allowSound:n.isSound||!0}),n.isMusic&&e.playMusic(),e.onEnableCustom(),e.startCustom()})),_.setEnabledInfoLog(!0),_.setEnabledVerboseLog(!0),_.configureBuild(re),f.getInstance().isHasTiniApp()?f.getInstance().getPlayerInfo().then((function(t){e.userTiki=t,_.configureUserId(t.customerId.toString()),_.initialize(ue,ce)})):(_.configureUserId("local_id"),_.initialize(ue,ce)),console.warn("===================================================================================="),console.error("!!!!!!!!!!! ------  STACK ART 3D, VERSION: 1.0.2  ------  !!!!!!!!!!!!!!!"),console.warn("===================================================================================="),console.warn("Note for Tester:\nKey 'r' to reset Data Facebook, then you need refresh game to active it"),console.warn("\nKey 'u' to unlock all level"),console.warn("\nKey 'h' to  +5 hint"),this.showAlert(!1)},g.onDestroy=function(){},g.onEnableCustom=function(){this.showLabel()},g.startCustom=function(){var e=this;this.preloadLevel(this._currentLevel),b.getData(b.getKeyData(),(function(t,n){e._unlockedLevel=n.unlockedLevel,e._currentLevel=n.currentLevel,0==e._currentLevel&&e.scheduleOnce((function(){return e.showGuide1()}),.8)}))},g.onStartLevel=function(){var e=this;0==this._unlockedLevel&&(this.popupGuide.active=!1,this.scheduleOnce((function(){return e.showGuide2()}),.1),console.error("show guide 2")),this.gameContainer.active=!0,this.levelUI.active=!0,this.homeUI.active=!1,this._currentLevel>se&&(this._currentLevel=se),this.initLevel(this._currentLevel),this.playSound(oe.CLICK,!1)},g.initLevel=function(e){var t,n=this;this.gameContainer.removeAllChildren(),this.gameContainer.active=!0,null===(t=this.levelUI.getChildByName("btn_next"))||void 0===t||t.setPosition(s(0,-450,0));var o="Level"+e,l=!1,a=function(){n.levelUI.getChildByName("ContainerUI").active=!0,n.levelUI.getChildByName("btn_next").active=!1,n.levelUI.getChildByName("HintBar").active=!1,n.levelUI.getChildByName("Level").active=!0,n.ui.getChildByName("Loading").active=!1,0==n._unlockedLevel?(n.levelName.string="GUIDE",n.levelName.isBold=!0,n.levelName.node.setPosition(s(0,-2.253,0))):(n.levelName.string="Level "+e,n.levelName.isBold=!0,n.levelName.node.setPosition(s(0,-2.253,0))),n.comingSoon.active=!1,n.btnSetting.active=!0,n.homeUI.active=!1},r=function(){n._currentLevel!==e&&(n._currentLevel=e,b.getData(b.getKeyData(),(function(e,t){e?console.log(e):(t.currentLevel=n._currentLevel,b.saveData(b.getKeyData(),t))})))};this.gameContainer.children.forEach((function(t){if(t.name===o)return t.active=!0,l=!0,a(),r(),void n.preloadLevel(e+1);t.active=!1})),l||(this.showLoading(!0),this._bundleInstance.getPrefabByName(o,(function(t,i){if(n.showLoading(!1),i)return n.gameContainer.addChild(u(i)),a(),r(),void n.preloadLevel(e+1);console.error(t)}),(function(e,t){n.setLoadingProgress(parseInt(e/t*100+""))})),i.logLevel(this._currentLevel),console.log("On start level ",this._currentLevel),f.getInstance().isHasTiniApp()&&f.getInstance().sendMessageToTiniApp({api:"reportAnalytics",params:{event:"level_start",data:{level_name:"Level "+this._currentLevel,user_id:this.userTiki.customerId}}}))},g.onWinGame=function(){var e=this;this._coinNumber+=5,this.levelUI.getChildByName("ContainerUI").active=!1,this.levelUI.getChildByName("HintBar").active=!1,this.btnSetting.active=!1,this._unlockedLevel<=this._currentLevel&&(this._unlockedLevel=this._currentLevel+1),this._currentLevel++,b.getData(b.getKeyData(),(function(t,n){t?console.log(t):(n.unlockedLevel=e._unlockedLevel,n.currentLevel=e._currentLevel,n.coinNumber=e._coinNumber,b.saveData(b.getKeyData(),n))})),i.logPassed(this._currentLevel)},g.nextLevel=function(){if(this.levelUI.getChildByName("btn_next").active=!1,this._currentLevel>se)return this.comingSoon.active=!0,void console.error("COMING SOON...");this.initLevel(this._currentLevel),i.logNextLevel(this._currentLevel),console.log("On start level ",this._currentLevel),f.getInstance().isHasTiniApp()&&f.getInstance().sendMessageToTiniApp({api:"reportAnalytics",params:{event:"level_start",data:{level_name:"Level "+this._currentLevel,user_id:this.userTiki.customerId}}})},g.onNextLevel=function(){this.playSound(oe.CLICK,!1),this.nextLevel()},g.onResetLevel=function(){this.playSound(oe.CLICK,!1),this.initLevel(this._currentLevel)},g.onSkipLevel=function(){var e=this;this.playSound(oe.CLICK,!1),this._skipNumber<=0?(i.logEvent("RevivedRewaredVideo"),this._currentLevel++,this._currentLevel>this._unlockedLevel&&this._unlockedLevel++,b.getData(b.getKeyData(),(function(t,n){t?console.log(t):(n.currentLevel=e._currentLevel,n.coinNumber=e._coinNumber,n.unlockedLevel=e._unlockedLevel,b.saveData(b.getKeyData(),n))})),this.nextLevel()):(this._skipNumber--,this._currentLevel++,this._currentLevel>this._unlockedLevel&&this._unlockedLevel++,b.getData(b.getKeyData(),(function(t,n){t?console.log(t):(n.currentLevel=e._currentLevel,n.skipNumber=e._skipNumber,n.unlockedLevel=e._unlockedLevel,b.saveData(b.getKeyData(),n))})),this.nextLevel()),i.logPassed(this._currentLevel)},g.hint=function(){var e=this;b.getData(b.getKeyData(),(function(t,n){e._hintNumber=n.hintNumber,e._coinNumber=n.coinNumber,e.playSound(oe.CLICK,!1);var i=c("Canvas/UI_Level/HintBar");e._hintNumber<=0?i.active=!0:(i.active=!0,e._hintNumber--,e.showLabel())}))},g.onClickHome=function(){this.playSound(oe.CLICK,!1),this.gameContainer.active=!1,this.levelUI.active=!1,this.homeUI.active=!0,this.comingSoon.active=!1,this.btnSetting.active=!0,this.showLabel()},g.onClickLevel=function(){this.playSound(oe.CLICK,!1),this.levelNode||(this.levelNode=u(this.levelPrefab),this.ui.addChild(this.levelNode)),this.levelNode.active=!0},g.onClickSetting=function(){this.playSound(oe.CLICK,!1);var e=c("Canvas/Setting");e?(e.active=!0,this.btnSetting.active=!1):(this.btnSetting.active=!1,e=u(this.setting),c("Canvas").addChild(e))},g.goLevelList=function(){this.playSound(oe.CLICK,!1),this.onClickLevel()},g.goShopping=function(){this.playSound(oe.CLICK,!1),this.shopNode||(this.shopNode=u(this.shopPrefab),this.ui.addChild(this.shopNode)),this.shopNode.active=!0},g.playSound=function(e,t){L.getInstance().playSound(this.sounds[e],t)},g.playMusic=function(){L.getInstance().setMusicVolume(.3),L.getInstance().playMusic(this.sounds[oe.BACKGROUND])},g.stopMusic=function(){this.sounds[oe.BACKGROUND].stop(),L.getInstance().stopMusic()},g.pauseMusic=function(){this.sounds[oe.BACKGROUND].stop(),L.getInstance().pauseMusic()},g.showLoading=function(e){void 0===e&&(e=!1),this._loading||(this._loading=c("Canvas/Loading")),this.setLoadingProgress(0),this._loading.active=e},g.setLoadingProgress=function(e){this._loading||(this._loading=c("Canvas/Loading")),this._loading.getChildByName("Progress").getChildByName("Number").getComponent(o).string=e+"%"},g.showLabel=function(){var e,t,n,i=this,l=null===(e=this.homeUI.getChildByPath("hintLabel/Num"))||void 0===e?void 0:e.getComponent(o),a=null===(t=this.homeUI.getChildByPath("coinLabel/Num"))||void 0===t?void 0:t.getComponent(o),r=null===(n=this.levelUI.getChildByPath("ContainerUI/Options/hint/Label"))||void 0===n?void 0:n.getComponent(o);a.string=this._coinNumber.toString(),l.string=this._hintNumber.toString(),this._hintNumber>0?(this.levelUI.getChildByPath("ContainerUI/Options/hint/Label").active=!0,this.levelUI.getChildByPath("ContainerUI/Options/hint/ads").active=!1,r.string=this._hintNumber.toString()):(this.levelUI.getChildByPath("ContainerUI/Options/hint/Label").active=!1,this.levelUI.getChildByPath("ContainerUI/Options/hint/ads").active=!0),b.getData(b.getKeyData(),(function(e,t){e?console.log(e):(t.hintNumber=i._hintNumber,t.coinNumber=i._coinNumber,b.saveData(b.getKeyData(),t))}))},g.preloadLevel=function(e){var t=this,n="Level"+e,i=!1;this.isPreloading=!0,e>se||(this.gameContainer.children.forEach((function(e){e.name!==n||(i=!0)})),i||this._bundleInstance.getPrefabByName(n,(function(e,n){if(n){var i=u(n);return i.active=!1,void t.gameContainer.addChild(i)}console.error(e)})))},g.onClickAlert=function(){this.alert.active=!1},g.showAlert=function(e,t,n){var i=this;if(void 0===e&&(e=!1),void 0===t&&(t="NO INTERNET CONNECTION"),void 0===n&&(n=3),this.alert.active=e,e){var l=this.alert.getChildByName("Text");l.getComponent(o).string=t,l.scale=s(0,0,1),v(l).to(.5,{scale:s(1,1,1)}).start(),this.scheduleOnce((function(){i.showAlert(!1)}),n)}},g.showGuide1=function(){this.popupGuide.active=!0},g.showGuide2=function(){this.popupGuide.getComponent(h).enabled=!0,this.popupGuide.getComponent(d).enabled=!0,this.popupGuide.active=!0},g.onShare=function(e){i.logEvent("ShareClick")},g.onInvite=function(e){i.logEvent("InviteClick")},g.canShare=function(){},g.canInvite=function(){},i.logEvent=function(e){_.addDesignEvent(e)},i.logFailed=function(e){_.addProgressionEvent(C.Fail,"Level"+(e+1))},i.logPassed=function(e){_.addProgressionEvent(C.Complete,"Level"+(e+1))},i.logLevel=function(e){i.logEvent("Enter_Level_"+(e+1)),_.addProgressionEvent(C.Start,"EnterLevel"+(e+1))},i.logNextLevel=function(e){i.logEvent("NextLevel"+e),_.addProgressionEvent(C.Start,"NextLevel"+(e+1))},i.logReceiveRewardAds=function(){},i.logShowInterestialAds=function(){},l=i,(a=[{key:"unlockedLevel",get:function(){return this._unlockedLevel}},{key:"currentLevel",get:function(){return this._currentLevel}}])&&ee(l.prototype,a),r&&ee(l,r),i}(g)).prototype,"ui",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=ie(z.prototype,"gameContainer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=ie(z.prototype,"levelUI",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=ie(z.prototype,"homeUI",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=ie(z.prototype,"levelName",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=ie(z.prototype,"comingSoon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=ie(z.prototype,"mainCamera",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=ie(z.prototype,"sounds",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=ie(z.prototype,"levelPrefab",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=ie(z.prototype,"shopPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=ie(z.prototype,"setting",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=ie(z.prototype,"btnSetting",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=ie(z.prototype,"alert",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=ie(z.prototype,"popupGuide",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=z))||M));t._RF.pop()}}}));

System.register("chunks:///_virtual/Analytics.ts",["cc","./GameAnalytics.node.js","./GameAnalytics.node.mjs_cjs=&original=.js"],(function(e){"use strict";var n,i;return{setters:[function(e){n=e.cclegacy},function(e){i=e.default},function(){}],execute:function(){var a,r,t;n._RF.push({},"9f3a2gKRWpEYbT7BIwikQos","Analytics",void 0),function(e){e[e.Undefined=0]="Undefined",e[e.Clicked=1]="Clicked",e[e.Show=2]="Show",e[e.FailedShow=3]="FailedShow",e[e.RewardReceived=4]="RewardReceived"}(a||(a={})),function(e){e[e.Undefined=0]="Undefined",e[e.Unknown=1]="Unknown",e[e.Offline=2]="Offline",e[e.NoFill=3]="NoFill",e[e.InternalError=4]="InternalError",e[e.InvalidRequest=5]="InvalidRequest",e[e.UnableToPrecache=6]="UnableToPrecache"}(r||(r={})),function(e){e[e.Undefined=0]="Undefined",e[e.Video=1]="Video",e[e.RewardedVideo=2]="RewardedVideo",e[e.Playable=3]="Playable",e[e.Interstitial=4]="Interstitial",e[e.OfferWall=5]="OfferWall",e[e.Banner=6]="Banner"}(t||(t={}));var d=e("GameAnalytics",i.GameAnalytics),o=e("EGAProgressionStatus",i.EGAProgressionStatus),l=e("EGAAdAction",i.EGAAdAction),c=e("EGAAdError",i.EGAAdError),s=e("EGAAdType",i.EGAAdType);e("default",{EGAProgressionStatus:o,GameAnalytics:d,EGAAdAction:l,EGAAdError:c,EGAAdType:s});n._RF.pop()}}}));

System.register("chunks:///_virtual/ShopManager.ts",["cc","./Data.ts","./gameManager.ts"],(function(t){"use strict";var e,i,n,a,o,r,h,u,l,c;return{setters:[function(t){e=t.cclegacy,i=t._decorator,n=t.Node,a=t.find,o=t.v3,r=t.tween,h=t.Label,u=t.Component},function(t){l=t.default},function(t){c=t.SOUND}],execute:function(){var s,b,g,m,v,d,f,_,C,p,N;function y(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function L(t,e,i,n,a){var o={};return Object.keys(n).forEach((function(t){o[t]=n[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,n){return n(t,e,i)||i}),o),a&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(a):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}e._RF.push({},"a5f00xYrztGLow1j7PbgXTX","ShopManager",void 0);var I=i.ccclass,S=i.property;t("ShopManager",(s=I("ShopManager"),b=S(n),g=S(n),m=S(n),v=S(n),s((_=L((f=function(t){var e,i;function n(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return y(w(e=t.call.apply(t,[this].concat(n))||this),"btnHint",_,w(e)),y(w(e),"btnCoin",C,w(e)),y(w(e),"hintContainer",p,w(e)),y(w(e),"coinContainer",N,w(e)),M(w(e),"_gameManager",void 0),M(w(e),"_hintNumber",0),M(w(e),"_coinNumber",0),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var u=n.prototype;return u.onLoad=function(){var t,e=this;this._gameManager=null===(t=a("gameManager"))||void 0===t?void 0:t.getComponent("GameManager"),this.node.setScale(o(1,1,1)),this.node.setPosition(o(-600)),l.getData(l.getKeyData(),(function(t,i){e._hintNumber=i.hintNumber,e._coinNumber=i.coinNumber,e.showLabel()}))},u.onEnable=function(){var t=this;this._gameManager.homeUI.active=!1,this._gameManager.btnSetting.active=!1,r(this.node).to(.2,{position:o(54)}).to(.2,{position:o(0)}).start(),l.getData(l.getKeyData(),(function(e,i){t._hintNumber=i.hintNumber,t._coinNumber=i.coinNumber,t.showLabel()}))},u.update=function(){},u.effectClose=function(t){this.node.active=!1,this.node.setPosition(o(-600)),t&&t()},u.onClose=function(){var t=this;this._gameManager.playSound(c.CLICK,!1),this.effectClose((function(){t._gameManager.homeUI.active=!0,t._gameManager.btnSetting.active=!0}))},u.onButton=function(t){switch(t.target.name){case"btnHint":this._gameManager.playSound(c.CLICK,!1),this.btnHint.getChildByName("white").active=!0,this.btnCoin.getChildByName("white").active=!1,this.onHint();break;case"btnCoin":this._gameManager.playSound(c.CLICK,!1),this.btnCoin.getChildByName("white").active=!0,this.btnHint.getChildByName("white").active=!1,this.onCoin()}},u.onHint=function(){this.coinContainer.active=!1,this.hintContainer.active=!0},u.onCoin=function(){this.hintContainer.active=!1,this.coinContainer.active=!0},u.watchAdHint=function(){var t=this;this._hintNumber++,l.getData(l.getKeyData(),(function(e,i){e?console.log(e):(i.hintNumber=t._hintNumber,i.coinNumber=t._coinNumber,l.saveData(l.getKeyData(),i),t.showLabel())}))},u.useCoin=function(t){switch(t.target.name){case"1":this._coinNumber>=50&&(this._hintNumber+=1,this._coinNumber-=50,this.showLabel());break;case"2":this._coinNumber>=100&&(this._hintNumber+=2,this._coinNumber-=100,this.showLabel());break;case"5":this._coinNumber>=250&&(this._hintNumber+=5,this._coinNumber-=250,this.showLabel());break;case"10":this._coinNumber>=500&&(this._hintNumber+=10,this._coinNumber-=500,this.showLabel())}},u.showLabel=function(){var t,e,i,n,a,o=this,r=null===(t=this.node.getChildByPath("hintLabel/Num"))||void 0===t?void 0:t.getComponent(h),u=null===(e=this.node.getChildByPath("coinLabel/Num"))||void 0===e?void 0:e.getComponent(h),c=null===(i=this._gameManager.homeUI.getChildByPath("hintLabel/Num"))||void 0===i?void 0:i.getComponent(h),s=null===(n=this._gameManager.homeUI.getChildByPath("coinLabel/Num"))||void 0===n?void 0:n.getComponent(h),b=null===(a=this._gameManager.levelUI.getChildByPath("ContainerUI/Options/hint/Label"))||void 0===a?void 0:a.getComponent(h);c.string=this._hintNumber.toString(),s.string=this._coinNumber.toString(),r.string=this._hintNumber.toString(),u.string=this._coinNumber.toString(),this._hintNumber>0?(this._gameManager.levelUI.getChildByPath("ContainerUI/Options/hint/Label").active=!0,this._gameManager.levelUI.getChildByPath("ContainerUI/Options/hint/ads").active=!1,b.string=this._hintNumber.toString()):(this._gameManager.levelUI.getChildByPath("ContainerUI/Options/hint/Label").active=!1,this._gameManager.levelUI.getChildByPath("ContainerUI/Options/hint/ads").active=!0),l.getData(l.getKeyData(),(function(t,e){t?console.log(t):(e.hintNumber=o._hintNumber,e.coinNumber=o._coinNumber,l.saveData(l.getKeyData(),e))}))},u.watchAdCoin=function(){this._coinNumber+=50,this.showLabel()},n}(u)).prototype,"btnHint",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=L(f.prototype,"btnCoin",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=L(f.prototype,"hintContainer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=L(f.prototype,"coinContainer",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));e._RF.pop()}}}));

System.register("chunks:///_virtual/OneFaceController.ts",["cc"],(function(e){"use strict";var t,i,r,n,o,a,l,u;return{setters:[function(e){t=e.cclegacy,i=e._decorator,r=e.Texture2D,n=e.CCBoolean,o=e.MeshRenderer,a=e.Color,l=e.v4,u=e.Component}],execute:function(){var s,c,b,f,h,p,m;function g(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y(e,t,i,r,n){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce((function(i,r){return r(e,t,i)||i}),o),n&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(n):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}t._RF.push({},"a82f0OqgURKgLhKC8Zl/w87","OneFaceController",void 0);var d=i.ccclass,w=i.property;e("OneFaceController",(s=d("OneFaceController"),c=w(r),b=w(n),s((p=y((h=function(e){var t,i;function r(){for(var t,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return g(C(t=e.call.apply(e,[this].concat(r))||this),"image",p,C(t)),v(C(t),"mainColor",new a(255,255,255,255)),v(C(t),"subColor",new a(255,255,255,255)),g(C(t),"subEqualMain",m,C(t)),t}i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var n=r.prototype;return n.onLoad=function(){var e,t=null===(e=this.node.getComponent(o))||void 0===e?void 0:e.material;t&&(t.setProperty("mainTexture",this.image),t.setProperty("mainColor",this.mainColor))},n.setMaterialProperty=function(e,t){var i,r=this.node.getComponent(o);null==r||null===(i=r.material)||void 0===i||i.setProperty(e,t)},n.setImage=function(e){this.image=e,this.setMaterialProperty("mainTexture",this.image)},n.setMainColor=function(e){this.mainColor=e,this.setMaterialProperty("mainColor",this.mainColor),this.subEqualMain&&(this.subColor=a.subtract(this.subColor,e,new a(110,110,110,110)),this.setMaterialProperty("subColor",this.subColor))},n.setSubColor=function(e){this.subEqualMain||(this.subColor=e,this.setMaterialProperty("subColor",this.subColor))},n.setTilingOffset=function(e,t,i,r){this.setMaterialProperty("tilingOffset",l(e,t,i,r))},n.resetMaincolor=function(){this.setMaterialProperty("mainColor",new a(255,255,255,255))},n.getImageWidth=function(){return this.image.width},n.getImageHeight=function(){return this.image.height},r}(u)).prototype,"image",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y(h.prototype,"subEqualMain",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),f=h))||f));t._RF.pop()}}}));

System.register("chunks:///_virtual/updateProgressValue.ts",["cc"],(function(t){"use strict";var e,i,r,n;return{setters:[function(t){e=t.cclegacy,i=t._decorator,r=t.Label,n=t.Component}],execute:function(){var a;function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e._RF.push({},"c0edd4Tnb9Fk5obZJDC61qU","updateProgressValue",void 0);var o=i.ccclass,c=(i.property,i.requireComponent);t("updateProgressValue",o("updateProgressValue")(a=c(r)(a=function(t){var e,i;function n(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return l(s(e=t.call.apply(t,[this].concat(r))||this),"isPlaying",!1),l(s(e),"startVal",0),l(s(e),"endVal",0),l(s(e),"diffVal",0),l(s(e),"currTime",0),l(s(e),"changingTime",0),l(s(e),"label",null),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var a=n.prototype;return a.start=function(){},a.playUpdateValue=function(t,e,i){this.startVal=t,this.endVal=e,this.diffVal=this.endVal-this.startVal,this.currTime=0,this.changingTime=i,this.label=this.node.getComponent(r),this.label.string=t+"%",this.isPlaying=!0},a.update=function(t){if(this.isPlaying){if(this.currTime<this.changingTime){this.currTime+=t;var e=this.startVal+parseInt((this.currTime/this.changingTime*this.diffVal).toString());return e<this.startVal?e=this.startVal:e>this.endVal&&(e=this.endVal),void(this.label.string=e+"%")}this.label.string=this.endVal+"%",this.isPlaying=!1}},n}(n))||a)||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Hint.ts",["cc"],(function(e){"use strict";var t,n,r,i;return{setters:[function(e){t=e.cclegacy,n=e._decorator,r=e.find,i=e.ProgressBar}],execute:function(){var o;function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t._RF.push({},"c5dadjEPRtMxYjx1rCBIC8z","Hint",void 0);var c=n.ccclass;n.property,e("Hint",c("Hint")(o=function(e){var t,n;function i(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return l(a(t=e.call.apply(e,[this].concat(r))||this),"_gameManager",void 0),l(a(t),"_level",void 0),t}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.prototype.onEnable=function(){var e,t,n;this._gameManager=null===(e=r("gameManager"))||void 0===e?void 0:e.getComponent("GameManager");var i=this._gameManager._currentLevel;this._level=null===(t=r("GameContainer"))||void 0===t||null===(n=t.getChildByName("Level"+i))||void 0===n?void 0:n.getComponent("Level"+i),null!=this._level&&null!=this._level&&this._level.hint()},i}(i))||o);t._RF.pop()}}}));

System.register("chunks:///_virtual/LevelItem.ts",["cc"],(function(e){"use strict";var i,t,n,r,l,o,a,c;return{setters:[function(e){i=e.cclegacy,t=e._decorator,n=e.SpriteAtlas,r=e.find,l=e.Sprite,o=e.Label,a=e.Color,c=e.Component}],execute:function(){var u,s,v,h,d;function p(e,i,t,n){t&&Object.defineProperty(e,i,{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(n):void 0})}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}i._RF.push({},"d5411NW8a9CmpP1H02gEst9","LevelItem",void 0);var b=t.ccclass,g=t.property;e("LevelItem",(u=b("LevelItem"),s=g([n]),u((d=function(e,i,t,n,r){var l={};return Object.keys(n).forEach((function(e){l[e]=n[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=t.slice().reverse().reduce((function(t,n){return n(e,i,t)||t}),l),r&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(r):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(e,i,l),l=null),l}((h=function(e){var i,t;function n(){for(var i,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(f(i=e.call.apply(e,[this].concat(n))||this),"icon",d,f(i)),m(f(i),"_levelList",void 0),m(f(i),"_level",void 0),i}t=e,(i=n).prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t;var c=n.prototype;return c.onLoad=function(){var e;this._levelList=null===(e=r("Canvas/Levels"))||void 0===e?void 0:e.getComponent("LevelList")},c.setData=function(e){var i,t,n=this.node.getChildByName("Img").getComponent(l),r=this.node.getComponent(l);this._level=e;var a=null;this._level<20?a=this.icon[0]:this._level<40?a=this.icon[1]:this._level<60?a=this.icon[2]:this._level<80?a=this.icon[3]:this._level<100?a=this.icon[4]:this._level<105&&(a=this.icon[5]),this.node.getChildByName("Num").getComponent(o).string=""+e,n.spriteFrame=null===(i=a)||void 0===i?void 0:i.getSpriteFrame("level"+e),r.spriteFrame=null==r||null===(t=r.spriteAtlas)||void 0===t?void 0:t.getSpriteFrame("Group "+(e%6+1))},c.setStatus=function(e){var i=this.node.getChildByName("Status"),t=null==i?void 0:i.getChildByName(e),n=this.node.getChildByName("Img");null==i||i.children.forEach((function(e){e.active=e===t})),n.getComponent(l).color="Clear"!==e?new a(0,0,0,255):new a(255,255,255,255)},c.onClick=function(){this._levelList.onItemClick(this._level)},n}(c)).prototype,"icon",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=h))||v));i._RF.pop()}}}));

System.register("chunks:///_virtual/TiniController.ts",["cc"],(function(e){"use strict";var n,t;return{setters:[function(e){n=e.cclegacy,t=e._decorator}],execute:function(){var i,a,r;function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}n._RF.push({},"dad39d4coBM5p2XaUJtOETu","TiniController",void 0);var s=t.ccclass;t.property,e("default",s((r=a=function(){function e(){c(this,"callbacks",{})}e.getInstance=function(){return e._instance||(e._instance=new e),e._instance};var n=e.prototype;return n.init=function(){var e=this;window.addEventListener("message",(function(n){var t=n.data,i=t.requestId,a=t.result;if(void 0!==e.callbacks[i]){var r=e.callbacks[i];delete e.callbacks[i],r(a)}})),console.log("init done")},n.sendMessageToTiniApp=function(e,n){var t=(new Date).getTime()+""+Math.floor(1e6*Math.random());this.callbacks[t]=n,my.postMessage({requestId:t,params:e})},n.isHasTiniApp=function(){try{return my}catch(e){}},n.getPlayerInfo=function(){var e=this;return new Promise((function(n){e.sendMessageToTiniApp({api:"getUserInfo"},(function(e){n(e.res)}))}))},n.start=function(){},e}(),c(a,"_instance",void 0),i=r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["cc","./Data.ts","./AudioManager.ts","./gameManager.ts"],(function(e){"use strict";var t,i,a,n,r,o,s,c,u,l,g,h;return{setters:[function(e){t=e.cclegacy,i=e._decorator,a=e.Node,n=e.Toggle,r=e.find,o=e.tween,s=e.v3,c=e.Component},function(e){u=e.default,l=e.KEY},function(e){g=e.default},function(e){h=e.SOUND}],execute:function(){var d,f,b,m,p,v,C,_,y,M,S,k,w;function O(e,t,i,a){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(a):void 0})}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function P(e,t,i,a,n){var r={};return Object.keys(a).forEach((function(e){r[e]=a[e]})),r.enumerable=!!r.enumerable,r.configurable=!!r.configurable,("value"in r||r.initializer)&&(r.writable=!0),r=i.slice().reverse().reduce((function(i,a){return a(e,t,i)||i}),r),n&&void 0!==r.initializer&&(r.value=r.initializer?r.initializer.call(n):void 0,r.initializer=void 0),void 0===r.initializer&&(Object.defineProperty(e,t,r),r=null),r}t._RF.push({},"df1ccMIVqxLNYoqnSXDoGqE","setting",void 0);var B=i.ccclass,I=i.property;e("Setting",(d=B("Setting"),f=I(a),b=I(n),m=I(n),p=I(n),v=I(a),d((y=P((_=function(e){var t,i;function a(){for(var t,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return O(z(t=e.call.apply(e,[this].concat(a))||this),"container",y,z(t)),O(z(t),"sound",M,z(t)),O(z(t),"music",S,z(t)),O(z(t),"vibration",k,z(t)),O(z(t),"btnRate",w,z(t)),L(z(t),"_gameManager",void 0),L(z(t),"_data",void 0),L(z(t),"checkHome",!1),t}i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var n=a.prototype;return n.onEnable=function(){var e=this;this.node.on("touchend",this.onClose,this),this.effectOpen(),this._gameManager=r("gameManager").getComponent("GameManager"),u.getData(l.LOCAL,(function(t,i){e._data=i,e.music.isChecked=e._data.isMusic,e.sound.isChecked=e._data.isSound,e.vibration.isChecked=e._data.isVibration})),this._gameManager.mainCamera.active=!1,this._gameManager.btnSetting.active=!1,this._data.isMusic?this.container.getChildByPath("Music/musicmute").active=!1:this.container.getChildByPath("Music/musicmute").active=!0,this._data.isSound?this.container.getChildByPath("Sound/speakermute").active=!1:this.container.getChildByPath("Sound/speakermute").active=!0},n.effectOpen=function(){o(this.container).parallel(o(this.container).to(.2,{position:s(0,0,0)},{easing:"quintOut"}),o().to(.2,{scale:s(1,1,1)},{easing:"quadInOut"})).start()},n.effectClose=function(e){var t=this;o(this.container).to(.2,{position:s(-1500,0,0)},{easing:"quintOut"}).to(0,{scale:s(.6,.6,.6)},{easing:"quartOut"}).call((function(){t.node.active=!1,t._gameManager.btnSetting.setPosition(s(400,1100,0)),e&&e()})).start()},n.onClose=function(){var e=this;this._gameManager.playSound(h.CLICK,!1),this.effectClose((function(){e._gameManager.mainCamera.active=!0,e._gameManager.btnSetting.active=!0}))},n.onChangeToggle=function(e){switch(e.target.name){case"toggleMusic":this._gameManager.playSound(h.CLICK,!1),this._data.isMusic=e.isChecked,u.saveData(l.LOCAL,this._data),g.getInstance().setConfig({allowMusic:this._data.isMusic}),e.isChecked?this._gameManager.playMusic():this._gameManager.stopMusic(),this._data.isMusic?this.container.getChildByPath("Music/musicmute").active=!1:this.container.getChildByPath("Music/musicmute").active=!0;break;case"toggleSound":this._gameManager.playSound(h.CLICK,!1),this._data.isSound=e.isChecked,u.saveData(l.LOCAL,this._data),g.getInstance().setConfig({allowSound:this._data.isSound}),this._data.isSound?this.container.getChildByPath("Sound/speakermute").active=!1:this.container.getChildByPath("Sound/speakermute").active=!0;break;case"toggleVibration":this._gameManager.playSound(h.CLICK,!1),this._data.isVibration=e.isChecked,u.saveData(this._data,l.LOCAL)}},a}(c)).prototype,"container",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=P(_.prototype,"sound",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=P(_.prototype,"music",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=P(_.prototype,"vibration",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=P(_.prototype,"btnRate",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=_))||C));t._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["cc","./TiniController.ts","./gameManager.ts"],(function(t){"use strict";var i,a,s,h,o,e,l,n,r,d,c,g,f,u,k,p,m,v,B,A,b,y,w;return{setters:[function(t){i=t.cclegacy,a=t._decorator,s=t.CCInteger,h=t.Texture2D,o=t.Prefab,e=t.Node,l=t.Color,n=t.find,r=t.v3,d=t.instantiate,c=t.Vec3,g=t.ModelComponent,f=t.v4,u=t.BoxCollider,k=t.PhysicsSystem,p=t.Vec2,m=t.v2,v=t.tween,B=t.Tween,A=t.geometry,b=t.Component},function(t){y=t.default},function(t){w=t.SOUND}],execute:function(){var C,P,R,_,O,X,Z,N,M,S,L,T,x,z,I;function F(t,i,a,s){a&&Object.defineProperty(t,i,{enumerable:a.enumerable,configurable:a.configurable,writable:a.writable,value:a.initializer?a.initializer.call(s):void 0})}function E(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function U(t,i,a){return i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t}function D(t,i,a,s,h){var o={};return Object.keys(s).forEach((function(t){o[t]=s[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=a.slice().reverse().reduce((function(a,s){return s(t,i,a)||a}),o),h&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(h):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,i,o),o=null),o}i._RF.push({},"fc3e3wOoW1EdL42yjaBSfvR","Game",void 0);var W=a.ccclass,G=a.property;t("Game1",(C=W("Game1"),P=G(s),R=G(h),_=G(o),O=G(o),X=G(e),Z=G(l),C((S=D((M=function(t){var i,a;function s(){for(var i,a=arguments.length,s=new Array(a),h=0;h<a;h++)s[h]=arguments[h];return F(E(i=t.call.apply(t,[this].concat(s))||this),"levelCurrent",S,E(i)),F(E(i),"mainTexture",L,E(i)),U(E(i),"row",0),U(E(i),"column",0),F(E(i),"blockPrefab",T,E(i)),F(E(i),"blockPrefabBG",x,E(i)),F(E(i),"pictureWin",z,E(i)),F(E(i),"colorStack",I,E(i)),U(E(i),"node_touch",[]),U(E(i),"numberStack",0),U(E(i),"stackArr",[]),U(E(i),"flatArr",[]),U(E(i),"fixedArr",[]),U(E(i),"blockNodeArr",[]),U(E(i),"blockCheckArr",[]),U(E(i),"dataBlock",[]),U(E(i),"oldPos",[]),U(E(i),"undoU",[]),U(E(i),"undoD",[]),U(E(i),"undoL",[]),U(E(i),"undoR",[]),U(E(i),"data",void 0),U(E(i),"dataX",0),U(E(i),"dataY",0),U(E(i),"dataZ",0),U(E(i),"startPoint",null),U(E(i),"endPoint",null),U(E(i),"r",[]),U(E(i),"_ray",new A.Ray),U(E(i),"flag",0),U(E(i),"flagCheck",!1),U(E(i),"done",!0),U(E(i),"winCheck",0),U(E(i),"run",!1),U(E(i),"_gameManager",void 0),U(E(i),"_levelNode",void 0),U(E(i),"_uiHome",void 0),U(E(i),"_uiLevel",void 0),U(E(i),"_uiLoading",void 0),U(E(i),"_levelCurrent",void 0),U(E(i),"levelScript",void 0),U(E(i),"_gameContainer",void 0),U(E(i),"imageFrame",void 0),U(E(i),"_pictureController",void 0),U(E(i),"pictureHeight",void 0),U(E(i),"pictureWidth",void 0),i}a=t,(i=s).prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a;var h=s.prototype;return h.onLoad=function(){var t,i;this._gameManager=n("gameManager").getComponent("GameManager"),this.mainCamera=this._gameManager.mainCamera,this._gameContainer=this._gameManager.gameContainer,this._uiHome=this._gameManager.homeUI,this._uiLevel=this._gameManager.levelUI,this._uiLoading=this._gameManager.loading,null===(t=this.mainCamera)||void 0===t||t.node.setPosition(r(1.1,8,6)),null===(i=this.mainCamera)||void 0===i||i.node.setRotationFromEuler(r(-60,0,0)),this.initStage(),this.touchScreen()},h.onEnable=function(){},h.start=function(){this.pictureWin.active=!1,this.node.setPosition(r(0,0,0)),this.flagCheck=!1,this.done=!0,this._uiLevel.getChildByName("btn_next").setPosition(r(0,0,0)),this._uiLevel.getChildByName("btn_next").active=!1},h.lateUpdate=function(){0==this.run&&this.checkWinGame()&&(this.run=!0,this.onWinGame())},h.initBlock=function(){for(var t=0;t<this.column;t++)for(var i=0;i<this.row;i++){var a=d(this.blockPrefab),s=d(this.blockPrefabBG);this.node.addChild(a),this.node.addChild(s),this.blockNodeArr.push(a),this.blockCheckArr.push(s),a.setPosition(new c(t,.1,-i)),a.scale=r(.99,.2,.99),a.active=!0,s.setPosition(new c(t,0,-i)),s.scale=r(.99,.1,.99),s.active=!0;var h=a.getComponent(g);h&&this.initMaterial(h,t,i);var o=a.getComponent("OneFaceController");null==o||o.setImage(this.mainTexture)}this.setFlag(this.blockNodeArr,this.column,this.row);this.mainCamera.node;var e=this._gameContainer;3==this.row&&3==this.column?(this.node.scale=r(this.column/4,this.node.scale.y*this.column/4,this.column/4),e.setPosition(r(.3,0,1.75))):3==this.row&&4==this.column?(this.node.scale=r(this.column/6,this.node.scale.y*this.column/6,this.column/6),e.setPosition(r(.2,0,2))):4==this.row&&3==this.column?(this.node.scale=r(this.column/4,this.node.scale.y*this.column/4,this.column/4),e.setPosition(r(.3,0,2.3))):4==this.row&&4==this.column?(this.node.scale=r(this.column/6,this.node.scale.y*this.column/6,this.column/6),e.setPosition(r(.125,0,2.3))):4==this.row&&5==this.column?(this.node.scale=r(this.column/8,this.node.scale.y*this.column/8,this.column/8),e.setPosition(r(-.1,0,2.3))):5==this.row&&3==this.column?(this.node.scale=r(this.column/4,this.node.scale.y*this.column/4,this.column/4),e.setPosition(r(.5,0,2.5))):5==this.row&&4==this.column?(this.node.scale=r(this.column/6,this.node.scale.y*this.column/6,this.column/6),e.setPosition(r(.075,0,2.5))):5==this.row&&5==this.column?(this.node.scale=r(this.column/8,this.node.scale.y*this.column/8,this.column/8),e.setPosition(r(-.1,0,2.5))):3==this.row&&2==this.column?(this.node.scale=r(this.column/3,this.node.scale.y*this.column/3,this.column/3),e.setPosition(r(.75,0,2))):2==this.row&&3==this.column?(this.node.scale=r(this.column/4,this.node.scale.y*this.column/4,this.column/4),e.setPosition(r(.5,0,1.25))):4==this.row&&2==this.column&&(this.node.scale=r(this.column/3,this.node.scale.y*this.column/3,this.column/3),e.setPosition(r(.75,0,2.2)))},h.setFlag=function(t,i,a){for(var s=0;s<i;s++)for(var h=0;h<a;h++){var o=s*this.row+h;t[o].name=o.toString()}},h.initMaterial=function(t,i,a){t.material&&t.material.setProperty("tilingOffset",f(1/this.column,1/this.row,i/this.column,(this.row-1-a)/this.row))},h.initData=function(t,i){for(var a=new Array,s=0;s<t;s++){a[s]=new Array;for(var h=0;h<i;h++)a[s][h]=-1}return a},h.vecScalePic=function(t){var i,a;this._pictureController=this.pictureWin.getComponent("OneFaceController"),this.pictureHeight=null===(i=this._pictureController)||void 0===i?void 0:i.getImageHeight(),this.pictureWidth=null===(a=this._pictureController)||void 0===a?void 0:a.getImageWidth();var s=this.pictureHeight/this.pictureWidth;return this.row!=this.column?r(t,t,t*s):r(t,t,t)},h.initStage=function(){if(this.node.children.length<=2){this.initBlock(),this.pictureWin.setScale(this.vecScalePic(.1*this.column)),this.pictureWin.position=r(this.blockNodeArr[0].position.x+(this.column-1)/2,.22,this.blockNodeArr[0].position.z-(this.row-1)/2);var t=0,i=0,a=1,s=this.stackArr[0],h=.1,o=this.stackArr[1];this.data=this.initData(this.row,this.column),this.blockNodeArr[s*this.row+o].setPosition(r(s,h,-o));var e=this.blockNodeArr[s*this.row+o].getComponent("OneFaceController");null==e||e.setMainColor(this.colorStack[a]),this.data[o][s]++;for(var l=2;l<this.stackArr.length;l+=2)if(-1!=this.stackArr[l]){var n=void 0;h+=.21,(n=this.blockNodeArr[this.stackArr[l]*this.row+this.stackArr[l+1]]).setPosition(s,h,-o);var d=n.getComponent("OneFaceController");null==d||d.setMainColor(this.colorStack[a]),this.data[o][s]++}else if(l+=1,h=.1,o=this.stackArr[l+1],s=this.stackArr[l],a++,i=this.stackArr[l-3]*this.row+this.stackArr[l-2],this.node_touch[i]=this.blockNodeArr[i],this.blockNodeArr[i].getChildByName("Direct").active=!0,this.stackArr[l]*this.row+this.stackArr[l+1]<=this.row*this.column-1){var g=this.blockNodeArr[this.stackArr[l]*this.row+this.stackArr[l+1]];g.setPosition(r(s,h,-o));var f=g.getComponent("OneFaceController");null==f||f.setMainColor(this.colorStack[a]),this.data[o][s]++}for(var k=0;k<this.fixedArr.length-1;k+=2){this.data[this.fixedArr[k+1]][this.fixedArr[k]]++;var p=this.blockNodeArr[this.row*this.fixedArr[k]+this.fixedArr[k+1]];p.setPosition(r(this.fixedArr[k],.1,-this.fixedArr[k+1]));var m=p.getComponent("OneFaceController");null==m||m.setMainColor(this.colorStack[0]);var v=this.fixedArr[k]*this.row+this.fixedArr[k+1];this.blockNodeArr[v].getComponent(u).enabled=!1}for(var B=this.stackArr.length-1;B>=1;B-=2)if(-1==this.stackArr[B]){var A=this.stackArr[B-2]*this.row+this.stackArr[B-1];t=this.stackArr[B-2]*this.row+this.stackArr[B-1],this.dataBlock[A]=new Array,this.numberStack++,this.dataBlock[A].push(this.blockNodeArr[A]),this.oldPos[A]=new Array,this.oldPos[A].push(new c(this.blockNodeArr[A].position.x,this.blockNodeArr[A].position.y,this.blockNodeArr[A].position.z)),this.undoD[A]=new Array,this.undoU[A]=new Array,this.undoL[A]=new Array,this.undoR[A]=new Array,this.undoD[A].push(this.blockNodeArr[A]),this.undoU[A].push(this.blockNodeArr[A]),this.undoL[A].push(this.blockNodeArr[A]),this.undoR[A].push(this.blockNodeArr[A]),B--}else{var b=this.stackArr[B-1]*this.row+this.stackArr[B];this.dataBlock[t].push(this.blockNodeArr[b])}for(var y=this.flatArr[this.flatArr.length-3],w=this.flatArr[this.flatArr.length-2],C=0,P=this.flatArr.length-1;P>=0;P-=2)if(-1==this.flatArr[P])y=this.flatArr[P-2],w=this.flatArr[P-1],C=this.flatArr[P-4]*this.row+this.flatArr[P-3],P!=this.flatArr.length-1&&a++,P--;else{h=.1,o=this.flatArr[P],i=(s=this.flatArr[P-1])*this.row+o,this.node_touch[i]=this.blockNodeArr[i];var R=this.blockNodeArr[s*this.row+o];R.setPosition(r(s+y,h,-o-w));var _=R.getComponent("OneFaceController");if(null==_||_.setMainColor(this.colorStack[a]),this.data[o+w][s+y]++,this.dataBlock[i]=new Array,this.dataBlock[i].push(this.blockNodeArr[i]),P>=2)for(var O=P-2;O>=0&&-1!=this.flatArr[O];O-=2)this.dataBlock[i].push(this.blockNodeArr[this.flatArr[O-1]*this.row+this.flatArr[O]]);if(P<this.flatArr.length-1)for(var X=P+2;X<this.flatArr.length-3;X+=2)if(-1!=this.flatArr[X+1])this.dataBlock[i].push(this.blockNodeArr[this.flatArr[X-1]*this.row+this.flatArr[X]]);else{if(-1!=this.flatArr[X+3])break;this.dataBlock[i].push(this.blockNodeArr[this.flatArr[X-1]*this.row+this.flatArr[X]])}}for(var Z=0,N=this.flatArr.length-1;N>=0;N-=2){var M=void 0;if(-1==this.flatArr[N])y=this.flatArr[N-2],w=this.flatArr[N-1],C=this.flatArr[N-4]*this.row+this.flatArr[N-3],N--,Z=0;else if(N-2>=0&&-1!=this.flatArr[N-2])Z++,-(M=this.blockNodeArr[this.flatArr[N]+this.flatArr[N-1]*this.row]).position.z-w==this.flatArr[N-2]?M.position.x-y>this.flatArr[N-3]?M.getChildByName("LineLeft").active=!0:M.position.x-y<this.flatArr[N-3]&&(M.getChildByName("LineRight").active=!0):M.position.x-y==this.flatArr[N-3]&&(M.position.z+w<-this.flatArr[N-2]?M.position.z+w==0?M.getChildByName("LineBottom").active=!0:M.getChildByName("LineTop").active=!0:M.position.z+w>-this.flatArr[N-2]&&(M.getChildByName("LineBottom").active=!0));else if(Z>2){M=this.blockNodeArr[C];var S=this.blockNodeArr[this.flatArr[N]+this.flatArr[N-1]*this.row];-M.position.z-w==this.flatArr[N]?M.position.x-y<this.flatArr[N-1]?S.getChildByName("LineLeft").active=!0:M.position.x-y>this.flatArr[N-1]&&(S.getChildByName("LineRight").active=!0):M.position.x-y==this.flatArr[N-1]&&(M.position.z+w>-this.flatArr[N]?S.getChildByName("LineTop").active=!0:M.position.z+w<-this.flatArr[N]&&(S.getChildByName("LineBottom").active=!0))}}}},h.touchScreen=function(){this.node.on(e.EventType.TOUCH_START,this.startTouch,this),this.node.on(e.EventType.TOUCH_END,this.endTouch,this),this.node.on(e.EventType.TOUCH_CANCEL,this.cancleTouch,this)},h.startTouch=function(t){this.startPoint=t.getLocation(),1==this.done&&this.rayCast(t)},h.endTouch=function(t){this.r.length>2&&(this._gameManager.popupGuide.active=!1),this.endPoint=t.getLocation();var i=this.startPoint,a=this.endPoint;this.reflectTouch(i,a)},h.cancleTouch=function(t){this.r.length>2&&(this._gameManager.popupGuide.active=!1),this.endPoint=t.getLocation();var i=this.startPoint,a=this.endPoint;this.reflectTouch(i,a)},h.rayCast=function(t){var i;if(null===(i=this.mainCamera)||void 0===i||i.screenPointToRay(t.getLocationX(),t.getLocationY(),this._ray),k.instance.raycast(this._ray)){this.r=k.instance.raycastResults,this.arrangeResults(this.r),this.flagCheck=!1;for(var a=0;a<this.r.length;a++){for(var s=0;s<this.node_touch.length;s++)if(this.node_touch[s]&&this.r[a].collider.node===this.node_touch[s]){this.dataX=this.r[a].collider.node.position.x,this.dataY=this.r[a].collider.node.position.y,this.dataZ=-this.r[a].collider.node.position.z,this.flag=Number(this.r[a].collider.node.name),this.flagCheck=!0;break}if(1==this.flagCheck)break}}},h.arrangeResults=function(t){var i,a,s;for(i=1;i<t.length;i++){for(s=t[i],a=i-1;a>=0&&t[a].distance>s.distance;)t[a+1]=t[a],a-=1;t[a+1]=s}return t},h.reflectTouch=function(t,i,a){var s=i.subtract(t),h=s.length();if(h>0&&1==this.flagCheck)if(Math.abs(s.x)>Math.abs(s.y)){if(s.x>0){if(null==this.oldPos[this.flag])return void this.moveFlatRight(1);var o=this.oldPos[this.flag].length;o>=1&&(this.dataX<this.oldPos[this.flag][o-1].x?this.undoLeft(1):this.dataY>=.22&&this.doRight(1))}else{if(null==this.oldPos[this.flag])return void this.moveFlatLeft(1);var e=this.oldPos[this.flag].length;e>=1&&(this.dataX>this.oldPos[this.flag][e-1].x?this.undoRight(1):this.dataY>=.22&&this.doLeft(1))}}else{if(s.y>0){if(null==this.oldPos[this.flag])return void this.moveFlatUp(1);var l=this.oldPos[this.flag].length;l>=1&&(this.dataZ<-this.oldPos[this.flag][l-1].z?this.undoDown(1):this.dataY>=.22&&this.doUp(1))}else{if(null==this.oldPos[this.flag])return void this.moveFlatDown(1);var n=this.oldPos[this.flag].length;n>=1&&(this.dataZ>-this.oldPos[this.flag][n-1].z?this.undoUp(1):this.dataY>=.22&&this.doDown(1))}}else if(0==h&&1==this.flagCheck){var r=!1,d=!1,c=!1,g=!1;if(this.dataZ+1>this.row-1&&(r=!0),this.dataZ-1<0&&(d=!0),this.dataX+1>this.column-1&&(g=!0),this.dataX-1<0&&(c=!0),(this.dataZ+1>this.row-1?r:-1!=this.data[this.dataZ+1][this.dataX])&&(this.dataZ-1<0?d:-1!=this.data[this.dataZ-1][this.dataX])&&(this.dataX-1<0?c:-1!=this.data[this.dataZ][this.dataX-1])?p.add(i,this.startPoint,m(1,0)):(this.dataZ+1>this.row-1?r:-1!=this.data[this.dataZ+1][this.dataX])&&(this.dataZ-1<0?d:-1!=this.data[this.dataZ-1][this.dataX])&&(this.dataX+1>this.column-1?g:-1!=this.data[this.dataZ][this.dataX+1])?p.add(i,this.startPoint,m(-1,0)):(this.dataX+1>this.column-1?g:-1!=this.data[this.dataZ][this.dataX+1])&&(this.dataX-1<0?c:-1!=this.data[this.dataZ][this.dataX-1])&&(this.dataZ+1>this.row-1?r:-1!=this.data[this.dataZ+1][this.dataX])?p.add(i,this.startPoint,m(0,-1)):(this.dataX+1>this.column-1?g:-1!=this.data[this.dataZ][this.dataX+1])&&(this.dataX-1<0?c:-1!=this.data[this.dataZ][this.dataX-1])&&(this.dataZ-1<0?d:-1!=this.data[this.dataZ-1][this.dataX])?p.add(i,this.startPoint,m(0,1)):p.add(i,this.startPoint,m(0,0)),h=(s=i.subtract(t)).length(),Math.abs(s.x)>Math.abs(s.y)){if(s.x>0){if(null==this.oldPos[this.flag])return void this.moveFlatRight(1);var f=this.oldPos[this.flag].length;f>=1&&(this.dataX<this.oldPos[this.flag][f-1].x?this.undoLeft(1):this.dataY>=.22&&this.doRight(1))}else if(s.x<0){if(null==this.oldPos[this.flag])return void this.moveFlatLeft(1);var u=this.oldPos[this.flag].length;u>=1&&(this.dataX>this.oldPos[this.flag][u-1].x?this.undoRight(1):this.dataY>=.22&&this.doLeft(1))}}else{if(s.y>0){if(null==this.oldPos[this.flag])return void this.moveFlatUp(1);var k=this.oldPos[this.flag].length;k>=1&&(this.dataZ<-this.oldPos[this.flag][k-1].z?this.undoDown(1):this.dataY>=.22&&this.doUp(1))}else if(s.y<0){if(null==this.oldPos[this.flag])return void this.moveFlatDown(1);var v=this.oldPos[this.flag].length;v>=1&&(this.dataZ>-this.oldPos[this.flag][v-1].z?this.undoUp(1):this.dataY>=.22&&this.doDown(1))}}}a&&a()},h.doRight=function(t){var i=this;if(this.flagCheck=!1,this.dataX==this.column-1)1==t&&(this._gameManager.playSound(w.ERROR,!1),this.animRotate());else if(-1!=this.data[this.dataZ][this.dataX+1])1==t&&(this._gameManager.playSound(w.ERROR,!1),this.animRotate());else if(this._gameManager.playSound(w.START_MOVE,!1),this.scheduleOnce((function(){i._gameManager.playSound(w.END_MOVE,!1)}),.25),0!=this.data[this.dataZ][this.dataX]){var a=this.dataBlock[this.flag].length;this.pushOldPos(this.flag);for(var s=0;s<a-1;s++)v(this.dataBlock[this.flag][s]).by(.1,{position:r(t,-.21*t,0)},{easing:"sineInOut"}).start(),this.dataX+1<=this.column-1&&(this.data[this.dataZ][this.dataX+1]++,this.data[this.dataZ][this.dataX]--),v(this.dataBlock[this.flag][s]).stop();this.undoR[this.flag]||(this.undoR[this.flag]=new Array),this.undoR[this.flag].push(this.dataBlock[this.flag][this.dataBlock[this.flag].length-1]),this.dataBlock[this.flag].length>1&&this.dataBlock[this.flag].pop(),this.dataX<this.column-1&&(this.dataX++,t++,this.doRight(t))}},h.doLeft=function(t){if(this.flagCheck=!1,0==this.dataX)1==t&&(this._gameManager.playSound(w.ERROR,!1),this.animRotate());else if(-1!=this.data[this.dataZ][this.dataX-1])1==t&&(this._gameManager.playSound(w.ERROR,!1),this.animRotate());else if(this._gameManager.playSound(w.START_MOVE,!1),0!=this.data[this.dataZ][this.dataX]){var i=this.dataBlock[this.flag].length;this.pushOldPos(this.flag);for(var a=0;a<i-1;a++)v(this.dataBlock[this.flag][a]).by(.1,{position:r(-t,-.21*t,0)},{easing:"sineInOut"}).start(),this.dataX-1>=0&&(this.data[this.dataZ][this.dataX-1]++,this.data[this.dataZ][this.dataX]--),v(this.dataBlock[this.flag][a]).stop();this.undoL[this.flag]||(this.undoL[this.flag]=new Array),this.undoL[this.flag].push(this.dataBlock[this.flag][this.dataBlock[this.flag].length-1]),this.dataBlock[this.flag].length>1&&this.dataBlock[this.flag].pop(),this.dataX>0&&(this.dataX--,t++,this.doLeft(t))}},h.doUp=function(t){if(this.flagCheck=!1,this.dataZ==this.row-1)1==t&&(this._gameManager.playSound(w.ERROR,!1),this.animRotate());else if(-1!=this.data[this.dataZ+1][this.dataX])1==t&&(this._gameManager.playSound(w.ERROR,!1),this.animRotate());else if(this._gameManager.playSound(w.START_MOVE,!1),0!=this.data[this.dataZ][this.dataX]){var i=this.dataBlock[this.flag].length;this.pushOldPos(this.flag);for(var a=0;a<i-1;a++)v(this.dataBlock[this.flag][a]).by(.1,{position:r(0,-.21*t,-t)},{easing:"sineInOut"}).start(),this.dataZ+1<=this.row-1&&(this.data[this.dataZ+1][this.dataX]++,this.data[this.dataZ][this.dataX]--),v(this.dataBlock[this.flag][a]).stop();this.undoU[this.flag]||(this.undoU[this.flag]=new Array),this.undoU[this.flag].push(this.dataBlock[this.flag][this.dataBlock[this.flag].length-1]),this.dataBlock[this.flag].length>1&&this.dataBlock[this.flag].pop(),this.dataZ<this.row-1&&(this.dataZ++,t++,this.doUp(t))}},h.doDown=function(t){if(this.flagCheck=!1,0==this.dataZ)1==t&&(this._gameManager.playSound(w.ERROR,!1),this.animRotate());else if(-1!=this.data[this.dataZ-1][this.dataX])1==t&&(this._gameManager.playSound(w.ERROR,!1),this.animRotate());else if(this._gameManager.playSound(w.START_MOVE,!1),0!=this.data[this.dataZ][this.dataX]){var i=this.dataBlock[this.flag].length;this.pushOldPos(this.flag);for(var a=0;a<i-1;a++)v(this.dataBlock[this.flag][a]).by(.1,{position:r(0,-.21*t,t)},{easing:"sineInOut"}).start(),this.dataZ-1>=0&&(this.data[this.dataZ-1][this.dataX]++,this.data[this.dataZ][this.dataX]--),v(this.dataBlock[this.flag][a]).stop();this.undoD[this.flag]||(this.undoD[this.flag]=new Array),this.undoD[this.flag].push(this.dataBlock[this.flag][this.dataBlock[this.flag].length-1]),this.dataBlock[this.flag].length>1&&this.dataBlock[this.flag].pop(),this.dataZ>0&&(this.dataZ--,t++,this.doDown(t))}},h.undoDown=function(t){this.flagCheck=!1,this._gameManager.playSound(w.START_MOVE,!1),0==this.dataBlock[this.flag]&&this.dataBlock[this.flag].push(this.r[0].collider.node),this.undoD[this.flag]||(this.undoD[this.flag]=new Array);var i=this.undoD[this.flag].length-1,a=this.undoD[this.flag][i],s=this.oldPos[this.flag].length-1;if(this.dataZ+1<=-this.oldPos[this.flag][s].z){if(this.r[0].collider.node.position.y<.22){if(this.data[this.dataZ][this.dataX]>=0)for(var h=this.dataBlock[this.flag].length,o=0;o<h;o++)v(this.dataBlock[this.flag][o]).by(.1,{position:r(0,.21*(t-o),-(t-o))},{easing:"sineInOut"}).start(),v(this.dataBlock[this.flag][o]).stop(),this.dataZ+1<=this.row-1&&(this.data[this.dataZ+1][this.dataX]++,this.data[this.dataZ][this.dataX]--)}else for(var e=this.dataBlock[this.flag].length,l=0;l<e;l++)this.dataBlock[this.flag][l].position.y<.22?v(this.dataBlock[this.flag][l]).by(.1,{position:r(0,.21*(e-l),-(e-l))},{easing:"sineInOut"}).start():v(this.dataBlock[this.flag][l]).by(.1,{position:r(0,.21*t,-t)},{easing:"sineInOut"}).start(),v(this.dataBlock[this.flag][l]).stop(),this.dataZ+1<=this.row-1&&(this.data[this.dataZ+1][this.dataX]++,this.data[this.dataZ][this.dataX]--);(this.dataBlock[this.flag][this.dataBlock[this.flag].length-1].name!=a.name||this.dataBlock[this.flag][0].position.y<.22)&&this.dataBlock[this.flag].push(a),this.undoD[this.flag].length>0&&this.undoD[this.flag].pop(),this.dataZ<this.row-1&&(this.dataBlock[this.flag].length>=1&&(this.dataZ++,t++),this.undoDown(t)),this.oldPos[this.flag].length>1&&2==t&&this.oldPos[this.flag].pop()}},h.undoUp=function(t){this.flagCheck=!1,this._gameManager.playSound(w.START_MOVE,!1),0==this.dataBlock[this.flag]&&this.dataBlock[this.flag].push(this.r[0].collider.node),this.undoU[this.flag]||(this.undoU[this.flag]=new Array);var i=this.undoU[this.flag].length-1,a=this.undoU[this.flag][i],s=this.oldPos[this.flag].length-1;if(this.dataZ-1>=-this.oldPos[this.flag][s].z){if(this.r[0].collider.node.position.y<.22){if(this.data[this.dataZ][this.dataX]>=0)for(var h=this.dataBlock[this.flag].length,o=0;o<h;o++)v(this.dataBlock[this.flag][o]).by(.1,{position:r(0,.21*(t-o),t-o)},{easing:"sineInOut"}).start(),v(this.dataBlock[this.flag][o]).stop(),this.dataZ-1>=0&&(this.data[this.dataZ-1][this.dataX]++,this.data[this.dataZ][this.dataX]--)}else for(var e=this.dataBlock[this.flag].length,l=0;l<e;l++)this.dataBlock[this.flag][l].position.y<.22?v(this.dataBlock[this.flag][l]).by(.1,{position:r(0,.21*(e-l),e-l)},{easing:"sineInOut"}).start():v(this.dataBlock[this.flag][l]).by(.1,{position:r(0,.21*t,t)},{easing:"sineInOut"}).start(),v(this.dataBlock[this.flag][l]).stop(),this.dataZ-1>=0&&(this.data[this.dataZ-1][this.dataX]++,this.data[this.dataZ][this.dataX]--);(this.dataBlock[this.flag][this.dataBlock[this.flag].length-1].name!=a.name||this.dataBlock[this.flag][0].position.y<.22)&&this.dataBlock[this.flag].push(a),this.undoU[this.flag].length>0&&this.undoU[this.flag].pop(),this.dataZ>0&&(this.dataBlock[this.flag].length>=1&&(this.dataZ--,t++),this.undoUp(t)),this.oldPos[this.flag].length>1&&2==t&&this.oldPos[this.flag].pop()}},h.undoRight=function(t){this.flagCheck=!1,this._gameManager.playSound(w.START_MOVE,!1),0==this.dataBlock[this.flag]&&this.dataBlock[this.flag].push(this.r[0].collider.node),this.undoR[this.flag]||(this.undoR[this.flag]=new Array);var i=this.undoR[this.flag].length-1,a=this.undoR[this.flag][i],s=this.oldPos[this.flag].length-1;if(this.dataX-1>=this.oldPos[this.flag][s].x){if(this.r[0].collider.node.position.y<.22){if(this.data[this.dataZ][this.dataX]>=0)for(var h=this.dataBlock[this.flag].length,o=0;o<h;o++)v(this.dataBlock[this.flag][o]).by(.1,{position:r(-(t-o),.21*(t-o),0)},{easing:"sineInOut"}).start(),v(this.dataBlock[this.flag][o]).stop(),this.dataX-1>=0&&(this.data[this.dataZ][this.dataX-1]++,this.data[this.dataZ][this.dataX]--)}else for(var e=this.dataBlock[this.flag].length,l=0;l<e;l++)this.dataBlock[this.flag][l].position.y<.22?v(this.dataBlock[this.flag][l]).by(.1,{position:r(-(e-l),.21*(e-l),0)},{easing:"sineInOut"}).start():v(this.dataBlock[this.flag][l]).by(.1,{position:r(-t,.21*t,0)},{easing:"sineInOut"}).start(),v(this.dataBlock[this.flag][l]).stop(),this.dataX-1>=0&&(this.data[this.dataZ][this.dataX-1]++,this.data[this.dataZ][this.dataX]--);(this.dataBlock[this.flag][this.dataBlock[this.flag].length-1].name!=a.name||this.dataBlock[this.flag][0].position.y<.22)&&this.dataBlock[this.flag].push(a),this.undoR[this.flag].length>0&&this.undoR[this.flag].pop(),this.dataX>0&&(this.dataBlock[this.flag].length>=1&&(this.dataX--,t++),this.undoRight(t)),this.oldPos[this.flag].length>1&&2==t&&this.oldPos[this.flag].pop()}},h.undoLeft=function(t){this.flagCheck=!1,this._gameManager.playSound(w.START_MOVE,!1),0==this.dataBlock[this.flag]&&this.dataBlock[this.flag].push(this.r[0].collider.node),this.undoL[this.flag]||(this.undoL[this.flag]=new Array);var i=this.undoL[this.flag].length-1,a=this.undoL[this.flag][i],s=this.oldPos[this.flag].length-1;if(this.dataX+1<=this.oldPos[this.flag][s].x){if(this.r[0].collider.node.position.y<.22){if(this.data[this.dataZ][this.dataX]>=0)for(var h=this.dataBlock[this.flag].length,o=0;o<h;o++)v(this.dataBlock[this.flag][o]).by(.1,{position:r(t-o,.21*(t-o),0)},{easing:"sineInOut"}).start(),v(this.dataBlock[this.flag][o]).stop(),this.dataX+1<this.column&&this.data[this.dataZ][this.dataX+1]++,this.data[this.dataZ][this.dataX]--}else for(var e=this.dataBlock[this.flag].length,l=0;l<e;l++)this.dataBlock[this.flag][l].position.y<.22?v(this.dataBlock[this.flag][l]).by(.1,{position:r(e-l,.21*(e-l),0)},{easing:"sineInOut"}).start():v(this.dataBlock[this.flag][l]).by(.1,{position:r(t,.21*t)},{easing:"sineInOut"}).start(),v(this.dataBlock[this.flag][l]).stop(),this.dataX+1<this.column&&this.data[this.dataZ][this.dataX+1]++,this.data[this.dataZ][this.dataX]--;(this.dataBlock[this.flag][this.dataBlock[this.flag].length-1].name!=a.name||this.dataBlock[this.flag][0].position.y<.22)&&this.dataBlock[this.flag].push(a),this.undoL[this.flag].length>0&&this.undoL[this.flag].pop(),this.dataX<this.column-1&&(this.dataBlock[this.flag].length>1&&(this.dataX++,t++),this.undoLeft(t)),this.oldPos[this.flag].length>1&&2==t&&this.oldPos[this.flag].pop()}},h.moveFlatRight=function(t){this.flagCheck=!1,this._gameManager.playSound(w.START_MOVE,!1);for(var i=0,a=0;a<this.dataBlock[this.flag].length;a++){var s=this.dataBlock[this.flag][a].position.x;this.dataBlock[this.flag][a].position.z;s+t<=this.column-1&&i++}for(var h=0,o=0;o<this.dataBlock[this.flag].length;o++){var e=this.dataBlock[this.flag][o].position.x,l=-this.dataBlock[this.flag][o].position.z;if(e+t<=this.column-1)if(-1==this.data[l][e+t])h++;else if(0==this.data[l][e+t])for(var n=0;n<this.dataBlock[this.flag].length;n++)-this.dataBlock[this.flag][n].position.z==l&&(1!=this.dataBlock[this.flag][n].getChildByName("LineRight").active&&1!=this.dataBlock[this.flag][n].getChildByName("LineLeft").active||e+t+1<=this.column-1&&-1==this.data[l][e+t+1]&&h++)}if(i==this.dataBlock[this.flag].length&&h>this.dataBlock[this.flag].length-1){for(var d=0,c=0;c<this.dataBlock[this.flag].length;c++){var g=this.dataBlock[this.flag][c].position.x,f=-this.dataBlock[this.flag][c].position.z;this.data[f][g+t]++,this.data[f][g+t-1]--,v(this.dataBlock[this.flag][c]).by(.1,{position:r(t,0,0)},{easing:"sineInOut"}).start(),g+t<this.column-1&&this.data[f][g+t+1]<=0&&d++,B.stopAllByTarget(v(this.dataBlock[this.flag][c]))}d==this.dataBlock[this.flag].length&&(t++,this.moveFlatRight(t))}else 1==t&&this.animRotate()},h.moveFlatLeft=function(t){this.flagCheck=!1,this._gameManager.playSound(w.START_MOVE,!1);for(var i=0;i<this.dataBlock[this.flag].length;i++)if(0==this.dataBlock[this.flag][i].position.x)return void this.animRotate();for(var a=0,s=0;s<this.dataBlock[this.flag].length;s++){var h=this.dataBlock[this.flag][s].position.x;this.dataBlock[this.flag][s].position.z;h-t>=0&&a++}for(var o=0,e=0;e<this.dataBlock[this.flag].length;e++){var l=this.dataBlock[this.flag][e].position.x,n=-this.dataBlock[this.flag][e].position.z;if(l-t>=0)if(-1==this.data[n][l-t])o++;else if(0==this.data[n][l-t])for(var d=0;d<this.dataBlock[this.flag].length;d++)-this.dataBlock[this.flag][d].position.z==n&&(1!=this.dataBlock[this.flag][d].getChildByName("LineRight").active&&1!=this.dataBlock[this.flag][d].getChildByName("LineLeft").active||l-t-1>=0&&-1==this.data[n][l-t-1]&&o++)}if(a==this.dataBlock[this.flag].length&&o>this.dataBlock[this.flag].length-1){for(var c=0,g=0;g<this.dataBlock[this.flag].length;g++){var f=this.dataBlock[this.flag][g].position.x,u=-this.dataBlock[this.flag][g].position.z;this.data[u][f-t]++,this.data[u][f-t+1]--,v(this.dataBlock[this.flag][g]).by(.1,{position:r(-t,0,0)},{easing:"sineInOut"}).start(),f-t>0&&this.data[u][f-t-1]<=0&&c++,B.stopAllByTarget(v(this.dataBlock[this.flag][g]))}c==this.dataBlock[this.flag].length&&(t++,this.moveFlatLeft(t))}else 1==t&&this.animRotate()},h.moveFlatUp=function(t){this.flagCheck=!1,this._gameManager.playSound(w.START_MOVE,!1);for(var i=0;i<this.dataBlock[this.flag].length;i++)if(this.dataBlock[this.flag][i].position.z==-(this.row-1))return void this.animRotate();for(var a=0,s=0;s<this.dataBlock[this.flag].length;s++){this.dataBlock[this.flag][s].position.x;-this.dataBlock[this.flag][s].position.z+1<=this.row-1&&a++}for(var h=0,o=0;o<this.dataBlock[this.flag].length;o++){var e=this.dataBlock[this.flag][o].position.x,l=-this.dataBlock[this.flag][o].position.z;if(l+t<=this.row-1)if(-1==this.data[l+t][e])h++;else if(0==this.data[l+t][e])for(var n=0;n<this.dataBlock[this.flag].length;n++)this.dataBlock[this.flag][n].position.x==e&&(1!=this.dataBlock[this.flag][n].getChildByName("LineBottom").active&&1!=this.dataBlock[this.flag][n].getChildByName("LineTop").active||l+t+1<=this.row-1&&-1==this.data[l+t+1][e]&&h++)}if(a==this.dataBlock[this.flag].length&&h>this.dataBlock[this.flag].length-1){for(var d=0,c=0;c<this.dataBlock[this.flag].length;c++){var g=this.dataBlock[this.flag][c].position.x,f=-this.dataBlock[this.flag][c].position.z;this.data[f+t][g]++,this.data[f+t-1][g]--,v(this.dataBlock[this.flag][c]).by(.1,{position:r(0,0,-t)},{easing:"sineInOut"}).start(),f+t<this.row-1&&this.data[f+t+1][g]<=0&&d++,B.stopAllByTarget(v(this.dataBlock[this.flag][c]))}d==this.dataBlock[this.flag].length&&(t++,this.moveFlatUp(t))}else 1==t&&this.animRotate()},h.moveFlatDown=function(t){this.flagCheck=!1,this._gameManager.playSound(w.START_MOVE,!1);for(var i=0;i<this.dataBlock[this.flag].length;i++)if(0==this.dataBlock[this.flag][i].position.z)return void this.animRotate();for(var a=0,s=0;s<this.dataBlock[this.flag].length;s++){this.dataBlock[this.flag][s].position.x;-this.dataBlock[this.flag][s].position.z-1>=0&&a++}for(var h=0,o=0;o<this.dataBlock[this.flag].length;o++){var e=this.dataBlock[this.flag][o].position.x,l=-this.dataBlock[this.flag][o].position.z;if(l-t>=0)if(-1==this.data[l-t][e])h++;else if(0==this.data[l-t][e])for(var n=0;n<this.dataBlock[this.flag].length;n++)this.dataBlock[this.flag][n].position.x==e&&(1!=this.dataBlock[this.flag][n].getChildByName("LineBottom").active&&1!=this.dataBlock[this.flag][n].getChildByName("LineTop").active||l-t-1>=0&&-1==this.data[l-t-1][e]&&h++)}if(a==this.dataBlock[this.flag].length&&h>this.dataBlock[this.flag].length-1){for(var d=0,c=0;c<this.dataBlock[this.flag].length;c++){var g=this.dataBlock[this.flag][c].position.x,f=-this.dataBlock[this.flag][c].position.z;this.data[f-t][g]++,this.data[f-t+1][g]--,v(this.dataBlock[this.flag][c]).by(.1,{position:r(0,0,t)},{easing:"sineInOut"}).start(),f-t>0&&this.data[f-t-1][g]<=0&&d++,B.stopAllByTarget(v(this.dataBlock[this.flag][c]))}d==this.dataBlock[this.flag].length&&(t++,this.moveFlatDown(t))}else 1==t&&this.animRotate()},h.pushOldPos=function(t){var i=this.oldPos[t].length;this.oldPos[t][i-1].y>this.dataY&&this.oldPos[this.flag].push(new c(this.dataX,this.dataY,-this.dataZ))},h.animRotate=function(){var t=this;this.done=!1;for(var i=this.dataBlock[this.flag].length,a=0;a<=i-1;a++)v(this.dataBlock[this.flag][a]).by(.1,{eulerAngles:r(0,5,0)},{easing:"cubicOut"}).by(.1,{eulerAngles:r(0,-5,0)},{easing:"cubicIn"}).by(.1,{eulerAngles:r(0,5,0)},{easing:"cubicOut"}).by(.1,{eulerAngles:r(0,-5,0)},{easing:"cubicIn"}).start();this.scheduleOnce((function(){t.done=!0}),.5)},h.onWinGame=function(){var t=this;this.done=!1,this.flagCheck=!1,this._gameManager.onWinGame();for(var i=0;i<this.row;i++)for(var a=0;a<this.column;a++)v(this.blockNodeArr[this.column*i+a]).delay(.1).by(.1,{eulerAngles:r(0,2,0),position:r(0,-.1,0)},{easing:"cubicOut"}).by(.1,{eulerAngles:r(0,-2,0),position:r(0,.2,0)},{easing:"cubicIn"}).by(.1,{eulerAngles:r(0,2,0),position:r(0,-.1,0)},{easing:"cubicOut"}).by(.1,{eulerAngles:r(0,-2,0),position:r(0,.2,0)},{easing:"cubicIn"}).repeat(10).start();this.scheduleOnce((function(){for(var i=0;i<t.row*t.column;i++){var a=t.blockNodeArr[i].getComponent(g);(null==a?void 0:a.material)&&a.material.setProperty("tilingOffset",f(1e-4,1e-4,0,0)),t.blockCheckArr[i].active=!1}t.pictureWin.active=!0,v(t.pictureWin).to(.3,{position:r(t.blockNodeArr[0].position.x+(t.column-1)/2,2.4,t.row>4?t.blockNodeArr[1].position.z:t.blockNodeArr[0].position.z)}).start()}),.4);for(var s=0;s<this.row;s++)for(var h=0;h<this.column;h++)s>this.row/2-1?v(this.blockNodeArr[this.column*s+h]).delay(.8).parallel(v(this.blockNodeArr[this.column*s+h]).by(.5,{eulerAngles:r(0,15,0)},{easing:"cubicOut"}).by(.5,{eulerAngles:r(0,-15,0)},{easing:"cubicIn"}).by(.5,{eulerAngles:r(0,15,0)},{easing:"cubicOut"}).by(.5,{eulerAngles:r(0,-15,0)},{easing:"cubicIn"}),v(this.blockNodeArr[this.column*s+h]).by(1,{position:r(0,.1,7*Math.random())},{easing:"cubicOut"})).start():v(this.blockNodeArr[this.column*s+h]).delay(.8).parallel(v(this.blockNodeArr[this.column*s+h]).by(.1,{eulerAngles:r(0,15,0)},{easing:"cubicOut"}).by(.5,{eulerAngles:r(0,-15,0)},{easing:"cubicIn"}).by(.5,{eulerAngles:r(0,15,0)},{easing:"cubicOut"}).by(.5,{eulerAngles:r(0,-15,0)},{easing:"cubicIn"}),v(this.blockNodeArr[this.column*s+h]).by(1,{position:r(0,.1,-7*Math.random())},{easing:"cubicOut"})).start();this.scheduleOnce((function(){t._gameManager.playSound(w.WIN,!1)}),.8),this.scheduleOnce((function(){v(t.pictureWin).repeatForever(v(t.pictureWin).to(.5,{scale:t.vecScalePic(.1*t.column)},{easing:"cubicOut"}).to(.5,{scale:t.vecScalePic(.1*t.column+.005)},{easing:"cubicIn"})).start()}),.7);var o=this._uiLevel.getChildByName("btn_next");this.scheduleOnce((function(){o.active=!0}),2),v(o).repeatForever(v(o).to(.5,{scale:r(1,1.05,1)}).to(.5,{scale:r(1,1,1)})).start(),this.scheduleOnce((function(){for(var i=0;i<t.row*t.column;i++)B.stopAllByTarget(v(t.blockNodeArr[i])),t.blockNodeArr[i].active=!1}),2),console.log("On End game win ",this.levelCurrent),y.getInstance().isHasTiniApp()&&y.getInstance().sendMessageToTiniApp({api:"reportAnalytics",params:{event:"level_end",data:{level_name:"Level "+this.levelCurrent,success:!0,user_id:this._gameManager.userTiki.customerId}}})},h.checkWinGame=function(){this.winCheck=0;for(var t=0;t<this.row;t++){for(var i=0;i<this.column;i++){if(0!=this.data[t][i]){this.winCheck=0;break}this.blockNodeArr[this.column*t+i].position.x==this.blockCheckArr[this.column*t+i].position.x&&this.blockNodeArr[this.column*t+i].position.z==this.blockCheckArr[this.column*t+i].position.z&&this.winCheck++}if(0==this.winCheck)return!1}return this.winCheck==this.row*this.column},h.resetGame=function(){for(var t=0;t<this.row*this.column;t++)this.blockNodeArr[t].active=!0,B.stopAllByTarget(v(this.pictureWin)),this.blockNodeArr[t].setPosition(r(0,.1,0)),this.blockNodeArr[t].setRotationFromEuler(r(0,180,0));this.initStage(),this.pictureWin.active=!1,this.done=!0,this.flagCheck=!1},h.hint=function(){for(var t=this,i=0;i<this.row*this.column;i++)this.blockNodeArr[i].active=!1;for(var a=1,s=0;s<this.stackArr.length;s+=2)if(-1!=this.stackArr[s]){var h=this.blockCheckArr[this.stackArr[s]*this.row+this.stackArr[s+1]];if(null!=h&&null!=h){var o=h.getComponent("OneFaceController");null==o||o.setMainColor(this.colorStack[a])}}else s--,a++;for(var e=0;e<this.fixedArr.length-1;e+=2){var l=this.blockCheckArr[this.fixedArr[e]*this.row+this.fixedArr[e+1]];if(null!=l&&null!=l){var r=l.getComponent("OneFaceController");null==r||r.setMainColor(this.colorStack[0])}}for(var d=this.flatArr.length-4;d>=0;d-=2)if(-1!=this.stackArr[d]){var c=this.blockCheckArr[this.flatArr[d-1]*this.row+this.flatArr[d]];if(null!=c&&null!=c){var g=c.getComponent("OneFaceController");null==g||g.setMainColor(this.colorStack[a])}}else d--,a++;this.pictureWin.active=!0,this.scheduleOnce((function(){t.pictureWin.active=!1;for(var i=0;i<t.row*t.column;i++){t.blockNodeArr[i].active=!0;var a=t.blockCheckArr[i].getComponent("OneFaceController");null==a||a.resetMaincolor()}n("Canvas/UI_Level/HintBar").active=!1}),1)},s}(b)).prototype,"levelCurrent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),L=D(M.prototype,"mainTexture",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=D(M.prototype,"blockPrefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=D(M.prototype,"blockPrefabBG",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=D(M.prototype,"pictureWin",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=D(M.prototype,"colorStack",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=M))||N));i._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./TiniController.ts","./bundleManager.ts","./Data.ts","./AudioManager.ts","./Analytics.ts","./gameManager.ts","./Game.ts","./updateProgressValue.ts","./loading.ts","./fightCanvas.ts","./LineEffect.ts","./LevelList.ts","./ButtonEffect.ts","./Guide.ts","./PauseManager.ts","./Main.ts","./addCoin.ts","./ShopManager.ts","./OneFaceController.ts","./Hint.ts","./LevelItem.ts","./setting.ts"],(function(){"use strict";return{setters:[function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){},function(){}],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});